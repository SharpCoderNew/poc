<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Palette SPA Shop</title>
  <style>
    /* Color tokens (palette-enforced) */
    :root {
      --brand-1: #264653; /* deep teal (primary bg/borders) */
      --brand-2: #2A9D8F; /* teal/primary accents */
      --brand-3: #E9C46A; /* warm gold for text/highlights */
      --brand-4: #F4A261; /* sand/orange for secondary accents */
      --brand-5: #E76F51; /* coral/red for errors/cta */
    }

    /* Global resets and accessibility helpers */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: var(--brand-1);
      color: #fff; /* base text color will be overridden where needed for contrast */
    }
    button { font-family: inherit; }

    /* Layout */
    header {
      position: sticky;
      top: 0;
      z-index: 20;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 20px;
      background: var(--brand-1);
      border-bottom: 3px solid var(--brand-5);
    }
    .brand {
      display: flex; align-items: center; gap: 12px;
    }
    .logo {
      width: 34px; height: 34px; border-radius: 8px;
      background: linear-gradient(135deg, var(--brand-2), var(--brand-3));
      display: inline-block;
    }
    .brand-name {
      font-weight: 800;
      color: var(--brand-3);
      letter-spacing: .5px;
      font-size: 1.05rem;
    }
    .brand-name span { color: #fff; opacity: .85; font-weight: 600; }

    .header-actions { display: flex; gap: 8px; align-items: center; }

    /* Buttons */
    .btn {
      border: 1px solid var(--brand-5);
      background: var(--brand-2);
      color: #06231a;
      padding: 10px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }
    .btn:hover { filter: brightness(0.98); }
    .btn-primary {
      background: var(--brand-5);
      color: #fff;
      border: none;
    }
    .btn-ghost {
      background: transparent;
      color: var(--brand-3);
      border: 1px solid rgba(255,255,255,0.25);
    }

    /* Layout grid: filters + catalog */
    .container {
      display: grid;
      grid-template-columns: 290px 1fr;
      gap: 16px;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Filters panel */
    .filters {
      background: #1f5b4a; /* slightly darker variant of brand-1 for contrast */
      border: 1px solid var(--brand-5);
      border-radius: 12px;
      padding: 14px;
      color: #e8f4f0;
    }
    .filters h2 {
      margin: 4px 0 12px;
      font-size: 1rem;
      color: var(--brand-3);
    }
    .search-row {
      display: flex; gap: 8px; align-items: center;
      margin-bottom: 12px;
    }
    .search-row input[type="search"] {
      flex: 1;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,.2);
      outline: none;
    }
    select, input[type="range"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,.2);
      background: #fff;
      color: #264653;
    }
    .chips {
      display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px;
    }
    .chip {
      padding: 6px 10px; border-radius: 999px;
      background: rgba(255,255,255,.15);
      border: 1px solid rgba(255,255,255,.3);
      color: #fff; cursor: pointer; font-size: .9rem;
    }
    .chipactive { background: var(--brand-3); color: #2b2b2b; }

    .range-row {
      display: grid; gap: 6px;
    }
    .range-row label { font-size: .9rem; color: #fff; }
    .range-row .value { font-weight: 700; text-align: right; color: #fff; }

    /* Catalog grid */
    .catalog {
      min-height: 60vh;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
      gap: 12px;
    }
    .card {
      background: var(--brand-2);
      border: 1px solid var(--brand-5);
      border-radius: 12px;
      padding: 12px;
      color: #063b2f;
      display: flex; flex-direction: column; height: 100%;
    }
    .thumb {
      height: 120px;
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      color: #062e24;
      font-weight: bold;
      font-size: 0.9rem;
      margin-bottom: 8px;
      text-shadow: 0 1px 0 rgba(255,255,255,.6);
    }
    .card h3 { margin: 6px 0; font-size: 1rem; color: #fff; }
    .card .rating { font-size: .9rem; color: #ffd966; }
    .card .price { margin-top: 6px; font-weight: 800; color: #fff; }
    .card-actions { margin-top: auto; display: flex; gap: 6px; }

    /* Product detail modal */
    .modal {
      position: fixed; inset: 0;
      background: rgba(0,0,0,.6);
      display: none; align-items: center; justify-content: center;
      padding: 20px;
      z-index: 50;
    }
    .modal.open { display: flex; }
    .modal-content {
      width: min(720px, 96%); background: #fff; color: #1b2b28;
      border-radius: 12px; padding: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 14px;
      border: 2px solid var(--brand-5);
    }
    .modal-image {
      height: 260px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem; font-weight: 700; color: #0b2a1a;
    }
    .modal-close { align-self: start; justify-self: end; background: transparent; border: none; font-size: 1.4rem; cursor: pointer; color: #333; }
    .modal-info h3 { margin: 0 0 6px; color: #033b27; }
    .modal-info .desc { color: #2b3b2a; margin-bottom: 6px; }
    .modal-info .stock { font-size: .9rem; color: #1a6a2e; }
    .modal-info .price { font-size: 1.2rem; font-weight: 800; color: #0e4a1f; }

    /* Cart panel (drawer) */
    .cart {
      position: fixed; right: 0; top: 0; height: 100%;
      width: 340px; max-width: 90vw;
      background: #2A9D8F; color: #032b1f;
      border-left: 3px solid var(--brand-5);
      transform: translateX(100%);
      transition: transform .28s ease;
      z-index: 40;
      display: flex; flex-direction: column;
    }
    .cart.open { transform: translateX(0); }
    .cart-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 14px; border-bottom: 1px solid rgba(0,0,0,.2);
    }
    .cart-items { padding: 10px; overflow: auto; flex: 1; display: grid; gap: 8px; }
    .cart-item { display: grid; grid-template-columns: 48px 1fr auto; gap: 8px; align-items: center; background: rgba(255,255,255,.25); border-radius: 8px; padding: 6px; }
    .cart-item .thumb { width: 48px; height: 48px; border-radius: 6px; display: inline-flex; align-items: center; justify-content: center; font-size: 0.8rem; color: #062b1a; }
    .cart-item .title { font-size: .92rem; font-weight: 700; }
    .cart-item .qty { display: inline-flex; align-items: center; gap: 6px; }
    .cart-item button { padding: 4px 8px; font-size: .8rem; }

    .cart-summary { padding: 12px; border-top: 1px solid rgba(0,0,0,.2); display: grid; gap: 8px; }

    /* Responsive tweaks */
    @media (max-width: 980px) {
      .container { grid-template-columns: 1fr; padding: 12px; }
      .modal-content { grid-template-columns: 1fr; }
    }

    /* Helper visuals for WCAG-ish contrast hints (no extra assets) */
    .sr-only { position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden; }
  </style>
</head>
<body>

  <header>
    <div class="brand" aria-label="Brand">
      <span class="logo" aria-hidden="true"></span>
      <div class="brand-name" aria-label="Brand name">
        Nova<span style="color:white;">Cart</span>
      </div>
    </div>
    <div class="header-actions">
      <button id="cartToggle" class="btn" aria-label="Open shopping cart">Cart (0)</button>
    </div>
  </header>

  <main class="container" role="main" aria-label="Product catalog and filters">
    <!-- Filters Panel -->
    <section class="filters" aria-label="Product filters">
      <h2>Filters</h2>
      <div class="search-row">
        <input id="search" type="search" placeholder="Search products…" aria-label="Search products" />
        <button id="clearSearch" class="btn-ghost" aria-label="Clear search" title="Clear search" style="padding:8px 10px;">Clear</button>
      </div>

      <div class="chips" id="categoryChips" aria-label="Categories"></div>

      <div class="range-row" aria-label="Price filter">
        <label for="maxPrice">Max price</label>
        <input id="maxPrice" type="range" min="5" max="100" step="1" value="100" aria-valuemin="5" aria-valuemax="100" aria-valuenow="100" />
        <div class="value" id="priceValue" style="text-align:right; font-weight:700;">$100</div>
      </div>

      <div style="margin-top: 10px;">
        <label for="sort" style="font-size:.9rem; display:block; margin-bottom:4px;">Sort by</label>
        <select id="sort" aria-label="Sort products">
          <option value="relevance">Relevance</option>
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="rating-desc">Rating</option>
        </select>
      </div>
    </section>

    <!-- Catalog Grid -->
    <section class="catalog" aria-label="Product catalog">
      <div id="productGrid" class="grid"></div>
    </section>
  </main>

  <!-- Product Detail Modal -->
  <div id="modal" class="modal" role="dialog" aria-label="Product details" aria-modal="true" tabindex="-1">
    <div class="modal-content">
      <button class="modal-close" aria-label="Close product details">✕</button>
      <div class="modal-image" id="modalImage" style="background:#ddd; color:#333; min-height:180px; border-radius:8px; display:flex; align-items:center; justify-content:center;">
        <!-- dynamic placeholder -->
      </div>
      <div class="modal-info" style="display:flex; flex-direction:column; gap:8px;">
        <h3 id="modalTitle"></h3>
        <div id="modalDesc" class="desc" style="color:#2a3b2a;"></div>
        <div id="modalRating" class="rating" aria-label="Product rating" style="color:#ffd166;"></div>
        <div id="modalPrice" class="price" style="font-size:1.2rem; font-weight:800;"></div>
        <div id="modalStock" class="stock" style="font-weight:600;"></div>
        <button id="modalAdd" class="btn btn-primary" aria-label="Add to cart from detail">Add to cart</button>
      </div>
    </div>
  </div>

  <!-- Checkout Modal (simulated) -->
  <div id="checkoutModal" class="modal" role="dialog" aria-label="Checkout" aria-modal="true" tabindex="-1">
    <div class="modal-content" style="grid-template-columns:1fr;">
      <button class="modal-close" aria-label="Close checkout">✕</button>
      <h3 style="margin:6px 0 0;">Checkout (Simulated)</h3>
      <form id="checkoutForm" style="display:flex; flex-direction:column; gap:8px; margin-top:6px;">
        <input type="text" placeholder="Full name" required aria-label="Full name" style="padding:10px; border-radius:6px; border:1px solid #ccc;">
        <input type="email" placeholder="Email" required aria-label="Email" style="padding:10px; border-radius:6px; border:1px solid #ccc;">
        <input type="text" placeholder="Address" required aria-label="Address" style="padding:10px; border-radius:6px; border:1px solid #ccc;">
        <button type="submit" class="btn btn-primary" aria-label="Place order">Place order</button>
      </form>
    </div>
  </div>

  <script>
    // Data: mock catalog (local data)
    const PRODUCTS = [
      { id: 'p1', name: 'Aero Backpack', description: 'A lightweight everyday backpack with 20L capacity and water-resistant fabric.', price: 49.99, category: 'Accessories', rating: 4.6, stock: 8, color: '#2A9D8F' },
      { id: 'p2', name: 'Solar Lantern', description: 'Compact lantern with warm glow and USB charging. Ideal for camping.', price: 29.99, category: 'Outdoor', rating: 4.2, stock: 15, color: '#E9C46A' },
      { id: 'p3', name: 'Ceramic Mug', description: 'Hand-painted mug, 12oz, microwave-safe and cozy to hold.', price: 14.99, category: 'Home', rating: 4.4, stock: 30, color: '#F4A261' },
      { id: 'p4', name: 'Trail Sneakers', description: 'Comfortable adaptive fit sneakers for everyday hikes.', price: 89.99, category: 'Apparel', rating: 4.7, stock: 5, color: '#E76F51' },
      { id: 'p5', name: 'Smartwatch Band', description: 'Replaceable leather band with secure clasp.', price: 19.99, category: 'Accessories', rating: 4.1, stock: 40, color: '#2A9D8F' },
      { id: 'p6', name: 'Thermal Bottle', description: 'Insulated stainless steel bottle keeps drinks hot or cold.', price: 24.99, category: 'Outdoor', rating: 4.3, stock: 0, color: '#264653' }, // out of stock
      { id: 'p7', name: 'Silk Scarf', description: 'Silky-soft scarf with timeless pattern.', price: 34.99, category: 'Apparel', rating: 4.5, stock: 12, color: '#2A9D8F' },
      { id: 'p8', name: 'Notebook Pro', description: 'Premium dotted notebook with 240 pages.', price: 9.99, category: 'Office', rating: 4.0, stock: 25, color: '#E9C46A' }
    ];

    // State
    let cart = [];
    const CART_KEY = 'spa-palette-cart-v1';
    let filters = { query: '', category: 'All', maxPrice: 100, sort: 'relevance' };

    // Elements
    const buildEl = (tag, attrs = {}, ...children) => {
      const el = document.createElement(tag);
      Object.entries(attrs).forEach(([k, v]) => {
        if (k.startsWith('on') && typeof v === 'function') el.addEventListener(k.substring(2).toLowerCase(), v);
        else if (k === 'style' && typeof v === 'object') Object.assign(el.style, v);
        else el.setAttribute(k, v);
      });
      children.forEach(child => el.appendChild(typeof child === 'string' ? document.createTextNode(child) : child));
      return el;
    };

    const productGrid = document.getElementById('productGrid');
    const searchInput = document.getElementById('search');
    const clearSearchBtn = document.getElementById('clearSearch');
    const categoryChips = document.getElementById('categoryChips');
    const maxPriceInput = document.getElementById('maxPrice');
    const priceValue = document.getElementById('priceValue');
    const sortSelect = document.getElementById('sort');
    const cartToggle = document.getElementById('cartToggle');
    const cartPanel = document.getElementById('cart');
    const modal = document.getElementById('modal');
    const modalCloseBtn = modal.querySelector('.modal-close');
    const modalImage = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const modalRating = document.getElementById('modalRating');
    const modalPrice = document.getElementById('modalPrice');
    const modalStock = document.getElementById('modalStock');
    const modalAdd = document.getElementById('modalAdd');
    const checkoutModal = document.getElementById('checkoutModal');
    const checkoutCloseBtn = checkoutModal.querySelector('.modal-close');
    const checkoutForm = document.getElementById('checkoutForm');
    const cartCloseBtn = document.querySelector('.cart-header button');
    const subtotalEl = document.getElementById('subtotal');
    const itemCountEl = document.getElementById('itemCount');
    const checkoutBtn = document.getElementById('checkout');

    // Initialize
    function init() {
      loadCart();
      renderCategoryChips();
      renderCatalog();
      updateCartBadge();
      bindEvents();
    }

    // Load cart from localStorage
    function loadCart() {
      try {
        const raw = localStorage.getItem(CART_KEY);
        if (raw) cart = JSON.parse(raw);
      } catch {
        cart = [];
      }
    }

    function saveCart() {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartBadge();
    }

    // Helpers
    function updateCartBadge() {
      const totalQty = cart.reduce((sum, it) => sum + it.qty, 0);
      cartToggle.textContent = `Cart (${totalQty})`;
      // enable/disable checkout
      checkoutBtn.disabled = cart.length === 0;
    }

    function currency(n) {
      return `$${n.toFixed(2)}`;
    }

    function getProductById(id) {
      return PRODUCTS.find(p => p.id === id);
    }

    // Render category chips
    function renderCategoryChips() {
      const categories = ['All', ...Array.from(new Set(PRODUCTS.map(p => p.category)))];
      categoryChips.innerHTML = '';
      categories.forEach(cat => {
        const chip = document.createElement('button');
        chip.className = 'chip' + (filters.category === cat ? ' chipactive' : '');
        chip.textContent = cat;
        chip.addEventListener('click', () => {
          filters.category = cat;
          document.querySelectorAll('.chip').forEach(c => c.classList.remove('chipactive'));
          chip.classList.add('chipactive');
          renderCatalog();
        });
        categoryChips.appendChild(chip);
      });
    }

    // Render catalog grid
    function renderCatalog() {
      // Apply filters
      const results = PRODUCTS.filter(p => {
        const q = filters.query.toLowerCase();
        const inQuery = !q || p.name.toLowerCase().includes(q) || p.description.toLowerCase().includes(q);
        const inCategory = filters.category === 'All' || p.category === filters.category;
        const inPrice = p.price <= filters.maxPrice;
        return inQuery && inCategory && inPrice;
      }).slice();

      // Sorting
      switch (filters.sort) {
        case 'price-asc':
          results.sort((a,b) => a.price - b.price);
          break;
        case 'price-desc':
          results.sort((a,b) => b.price - a.price);
          break;
        case 'rating-desc':
          results.sort((a,b) => b.rating - a.rating);
          break;
        default:
          // relevance: keep as is (could be randomized or by stock)
          break;
      }

      productGrid.innerHTML = '';
      if (results.length === 0) {
        productGrid.innerHTML = `
          <div style="grid-column:1 / -1; padding:20px; text-align:center; border:1px dashed rgba(255,255,255,.25); border-radius:8px;">
            No products match your filters.
          </div>`;
        return;
      }

      results.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        card.setAttribute('data-id', p.id);

        // image/thumb
        const thumb = document.createElement('div');
        thumb.className = 'thumb';
        thumb.style.background = p.color;
        thumb.textContent = p.name.split(' ').slice(0,2).join(' ');
        // content
        const title = document.createElement('h3');
        title.textContent = p.name;
        const rating = document.createElement('div');
        rating.className = 'rating';
        rating.setAttribute('aria-label', `Rating ${p.rating} out of 5`);
        rating.textContent = '★'.repeat(Math.round(p.rating)) + '☆'.repeat(5 - Math.round(p.rating));

        const price = document.createElement('div');
        price.className = 'price';
        price.textContent = currency(p.price);

        // actions
        const actions = document.createElement('div');
        actions.className = 'card-actions';
        const viewBtn = document.createElement('button');
        viewBtn.className = 'btn';
        viewBtn.textContent = 'View';
        viewBtn.addEventListener('click', () => openProductModal(p.id));

        const addBtn = document.createElement('button');
        addBtn.className = 'btn btn-primary';
        addBtn.textContent = 'Add';
        addBtn.addEventListener('click', () => addToCart(p.id, 1));

        actions.appendChild(viewBtn);
        actions.appendChild(addBtn);

        card.appendChild(thumb);
        card.appendChild(title);
        card.appendChild(rating);
        card.appendChild(price);
        card.appendChild(actions);

        // click anywhere on card also open detail
        card.addEventListener('click', (e) => {
          if (e.target.tagName.toLowerCase() === 'button') return;
          openProductModal(p.id);
        });

        productGrid.appendChild(card);
      });
    }

    // Open product detail modal
    function openProductModal(productId) {
      const p = getProductById(productId);
      if (!p) return;
      // fill
      modalTitle.textContent = p.name;
      modalDesc.textContent = p.description;
      modalRating.textContent = 'Rating: ' + p.rating.toFixed(1) + ' / 5';
      modalPrice.textContent = currency(p.price);
      modalStock.textContent = p.stock > 0 ? `In stock: ${p.stock}` : 'Out of stock';
      modalImage.innerHTML = `<div style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:1.1rem; color:#063b2a; background:${p.color}; border-radius:8px;">
        ${p.name.split(' ').slice(0,2).join(' ')}
      </div>`;
      modalAdd.onclick = () => {
        addToCart(p.id, 1);
        closeModal(modal);
      };
      showModal(modal);
    }

    // Cart operations
    function addToCart(productId, qty = 1) {
      const p = getProductById(productId);
      if (!p) return;
      if (p.stock <= 0) return; // out of stock
      const existing = cart.find(it => it.productId === productId);
      const currentQty = existing ? existing.qty : 0;
      const newQty = currentQty + qty;

      // cap by stock
      const finalQty = Math.min(newQty, p.stock);
      if (existing) {
        existing.qty = finalQty;
      } else {
        cart.push({ productId, qty: finalQty });
      }
      saveCart();
      renderCartItems();
      // optional feedback
      cartToggle.focus();
    }

    function removeFromCart(productId) {
      cart = cart.filter(it => it.productId !== productId);
      saveCart();
      renderCartItems();
    }

    function renderCartItems() {
      const container = document.getElementById('cartItems');
      container.innerHTML = '';
      if (cart<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Palette SPA Shop</title>
  <style>
    /* Color tokens (palette-enforced) */
    :root {
      --brand-1: #264653; /* deep teal (primary bg/borders) */
      --brand-2: #2A9D8F; /* teal/primary accents */
      --brand-3: #E9C46A; /* warm gold for text/highlights */
      --brand-4: #F4A261; /* sand/orange for secondary accents */
      --brand-5: #E76F51; /* coral/red for errors/cta */
    }

    /* Global resets and accessibility helpers */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: var(--brand-1);
      color: #fff; /* base text color will be overridden where needed for contrast */
    }
    button { font-family: inherit; }

    /* Layout */
    header {
      position: sticky;
      top: 0;
      z-index: 20;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 20px;
      background: var(--brand-1);
      border-bottom: 3px solid var(--brand-5);
    }
    .brand {
      display: flex; align-items: center; gap: 12px;
    }
    .logo {
      width: 34px; height: 34px; border-radius: 8px;
      background: linear-gradient(135deg, var(--brand-2), var(--brand-3));
      display: inline-block;
    }
    .brand-name {
      font-weight: 800;
      color: var(--brand-3);
      letter-spacing: .5px;
      font-size: 1.05rem;
    }
    .brand-name span { color: #fff; opacity: .85; font-weight: 600; }

    .header-actions { display: flex; gap: 8px; align-items: center; }

    /* Buttons */
    .btn {
      border: 1px solid var(--brand-5);
      background: var(--brand-2);
      color: #06231a;
      padding: 10px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }
    .btn:hover { filter: brightness(0.98); }
    .btn-primary {
      background: var(--brand-5);
      color: #fff;
      border: none;
    }
    .btn-ghost {
      background: transparent;
      color: var(--brand-3);
      border: 1px solid rgba(255,255,255,0.25);
    }

    /* Layout grid: filters + catalog */
    .container {
      display: grid;
      grid-template-columns: 290px 1fr;
      gap: 16px;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Filters panel */
    .filters {
      background: #1f5b4a; /* slightly darker variant of brand-1 for contrast */
      border: 1px solid var(--brand-5);
      border-radius: 12px;
      padding: 14px;
      color: #e8f4f0;
    }
    .filters h2 {
      margin: 4px 0 12px;
      font-size: 1rem;
      color: var(--brand-3);
    }
    .search-row {
      display: flex; gap: 8px; align-items: center;
      margin-bottom: 12px;
    }
    .search-row input[type="search"] {
      flex: 1;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,.2);
      outline: none;
    }
    select, input[type="range"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,.2);
      background: #fff;
      color: #264653;
    }
    .chips {
      display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px;
    }
    .chip {
      padding: 6px 10px; border-radius: 999px;
      background: rgba(255,255,255,.15);
      border: 1px solid rgba(255,255,255,.3);
      color: #fff; cursor: pointer; font-size: .9rem;
    }
    .chipactive { background: var(--brand-3); color: #2b2b2b; }

    .range-row {
      display: grid; gap: 6px;
    }
    .range-row label { font-size: .9rem; color: #fff; }
    .range-row .value { font-weight: 700; text-align: right; color: #fff; }

    /* Catalog grid */
    .catalog {
      min-height: 60vh;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
      gap: 12px;
    }
    .card {
      background: var(--brand-2);
      border: 1px solid var(--brand-5);
      border-radius: 12px;
      padding: 12px;
      color: #063b2f;
      display: flex; flex-direction: column; height: 100%;
    }
    .thumb {
      height: 120px;
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      color: #062e24;
      font-weight: bold;
      font-size: 0.9rem;
      margin-bottom: 8px;
      text-shadow: 0 1px 0 rgba(255,255,255,.6);
    }
    .card h3 { margin: 6px 0; font-size: 1rem; color: #fff; }
    .card .rating { font-size: .9rem; color: #ffd966; }
    .card .price { margin-top: 6px; font-weight: 800; color: #fff; }
    .card-actions { margin-top: auto; display: flex; gap: 6px; }

    /* Product detail modal */
    .modal {
      position: fixed; inset: 0;
      background: rgba(0,0,0,.6);
      display: none; align-items: center; justify-content: center;
      padding: 20px;
      z-index: 50;
    }
    .modal.open { display: flex; }
    .modal-content {
      width: min(720px, 96%); background: #fff; color: #1b2b28;
      border-radius: 12px; padding: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 14px;
      border: 2px solid var(--brand-5);
    }
    .modal-image {
      height: 260px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem; font-weight: 700; color: #0b2a1a;
    }
    .modal-close { align-self: start; justify-self: end; background: transparent; border: none; font-size: 1.4rem; cursor: pointer; color: #333; }
    .modal-info h3 { margin: 0 0 6px; color: #033b27; }
    .modal-info .desc { color: #2b3b2a; margin-bottom: 6px; }
    .modal-info .stock { font-size: .9rem; color: #1a6a2e; }
    .modal-info .price { font-size: 1.2rem; font-weight: 800; color: #0e4a1f; }

    /* Cart panel (drawer) */
    .cart {
      position: fixed; right: 0; top: 0; height: 100%;
      width: 340px; max-width: 90vw;
      background: #2A9D8F; color: #032b1f;
      border-left: 3px solid var(--brand-5);
      transform: translateX(100%);
      transition: transform .28s ease;
      z-index: 40;
      display: flex; flex-direction: column;
    }
    .cart.open { transform: translateX(0); }
    .cart-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 14px; border-bottom: 1px solid rgba(0,0,0,.2);
    }
    .cart-items { padding: 10px; overflow: auto; flex: 1; display: grid; gap: 8px; }
    .cart-item { display: grid; grid-template-columns: 48px 1fr auto; gap: 8px; align-items: center; background: rgba(255,255,255,.25); border-radius: 8px; padding: 6px; }
    .cart-item .thumb { width: 48px; height: 48px; border-radius: 6px; display: inline-flex; align-items: center; justify-content: center; font-size: 0.8rem; color: #062b1a; }
    .cart-item .title { font-size: .92rem; font-weight: 700; }
    .cart-item .qty { display: inline-flex; align-items: center; gap: 6px; }
    .cart-item button { padding: 4px 8px; font-size: .8rem; }

    .cart-summary { padding: 12px; border-top: 1px solid rgba(0,0,0,.2); display: grid; gap: 8px; }

    /* Responsive tweaks */
    @media (max-width: 980px) {
      .container { grid-template-columns: 1fr; padding: 12px; }
      .modal-content { grid-template-columns: 1fr; }
    }

    /* Helper visuals for WCAG-ish contrast hints (no extra assets) */
    .sr-only { position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden; }
  </style>
</head>
<body>

  <header>
    <div class="brand" aria-label="Brand">
      <span class="logo" aria-hidden="true"></span>
      <div class="brand-name" aria-label="Brand name">
        Nova<span style="color:white;">Cart</span>
      </div>
    </div>
    <div class="header-actions">
      <button id="cartToggle" class="btn" aria-label="Open shopping cart">Cart (0)</button>
    </div>
  </header>

  <main class="container" role="main" aria-label="Product catalog and filters">
    <!-- Filters Panel -->
    <section class="filters" aria-label="Product filters">
      <h2>Filters</h2>
      <div class="search-row">
        <input id="search" type="search" placeholder="Search products…" aria-label="Search products" />
        <button id="clearSearch" class="btn-ghost" aria-label="Clear search" title="Clear search" style="padding:8px 10px;">Clear</button>
      </div>

      <div class="chips" id="categoryChips" aria-label="Categories"></div>

      <div class="range-row" aria-label="Price filter">
        <label for="maxPrice">Max price</label>
        <input id="maxPrice" type="range" min="5" max="100" step="1" value="100" aria-valuemin="5" aria-valuemax="100" aria-valuenow="100" />
        <div class="value" id="priceValue" style="text-align:right; font-weight:700;">$100</div>
      </div>

      <div style="margin-top: 10px;">
        <label for="sort" style="font-size:.9rem; display:block; margin-bottom:4px;">Sort by</label>
        <select id="sort" aria-label="Sort products">
          <option value="relevance">Relevance</option>
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="rating-desc">Rating</option>
        </select>
      </div>
    </section>

    <!-- Catalog Grid -->
    <section class="catalog" aria-label="Product catalog">
      <div id="productGrid" class="grid"></div>
    </section>
  </main>

  <!-- Product Detail Modal -->
  <div id="modal" class="modal" role="dialog" aria-label="Product details" aria-modal="true" tabindex="-1">
    <div class="modal-content">
      <button class="modal-close" aria-label="Close product details">✕</button>
      <div class="modal-image" id="modalImage" style="background:#ddd; color:#333; min-height:180px; border-radius:8px; display:flex; align-items:center; justify-content:center;">
        <!-- dynamic placeholder -->
      </div>
      <div class="modal-info" style="display:flex; flex-direction:column; gap:8px;">
        <h3 id="modalTitle"></h3>
        <div id="modalDesc" class="desc" style="color:#2a3b2a;"></div>
        <div id="modalRating" class="rating" aria-label="Product rating" style="color:#ffd166;"></div>
        <div id="modalPrice" class="price" style="font-size:1.2rem; font-weight:800;"></div>
        <div id="modalStock" class="stock" style="font-weight:600;"></div>
        <button id="modalAdd" class="btn btn-primary" aria-label="Add to cart from detail">Add to cart</button>
      </div>
    </div>
  </div>

  <!-- Checkout Modal (simulated) -->
  <div id="checkoutModal" class="modal" role="dialog" aria-label="Checkout" aria-modal="true" tabindex="-1">
    <div class="modal-content" style="grid-template-columns:1fr;">
      <button class="modal-close" aria-label="Close checkout">✕</button>
      <h3 style="margin:6px 0 0;">Checkout (Simulated)</h3>
      <form id="checkoutForm" style="display:flex; flex-direction:column; gap:8px; margin-top:6px;">
        <input name="name" type="text" placeholder="Full name" required aria-label="Full name" style="padding:10px; border-radius:6px; border:1px solid #ccc;">
        <input name="email" type="email" placeholder="Email" required aria-label="Email" style="padding:10px; border-radius:6px; border:1px solid #ccc;">
        <input name="address" type="text" placeholder="Address" required aria-label="Address" style="padding:10px; border-radius:6px; border:1px solid #ccc;">
        <button type="submit" class="btn btn-primary" aria-label="Place order">Place order</button>
      </form>
    </div>
  </div>

  <script>
    // Data: mock catalog (local data)
    const PRODUCTS = [
      { id: 'p1', name: 'Aero Backpack', description: 'A lightweight everyday backpack with 20L capacity and water-resistant fabric.', price: 49.99, category: 'Accessories', rating: 4.6, stock: 8, color: '#2A9D8F' },
      { id: 'p2', name: 'Solar Lantern', description: 'Compact lantern with warm glow and USB charging. Ideal for camping.', price: 29.99, category: 'Outdoor', rating: 4.2, stock: 15, color: '#E9C46A' },
      { id: 'p3', name: 'Ceramic Mug', description: 'Hand-painted mug, 12oz, microwave-safe and cozy to hold.', price: 14.99, category: 'Home', rating: 4.4, stock: 30, color: '#F4A261' },
      { id: 'p4', name: 'Trail Sneakers', description: 'Comfortable adaptive fit sneakers for everyday hikes.', price: 89.99, category: 'Apparel', rating: 4.7, stock: 5, color: '#E76F51' },
      { id: 'p5', name: 'Smartwatch Band', description: 'Replaceable leather band with secure clasp.', price: 19.99, category: 'Accessories', rating: 4.1, stock: 40, color: '#2A9D8F' },
      { id: 'p6', name: 'Thermal Bottle', description: 'Insulated stainless steel bottle keeps drinks hot or cold.', price: 24.99, category: 'Outdoor', rating: 4.3, stock: 0, color: '#264653' }, // out of stock
      { id: 'p7', name: 'Silk Scarf', description: 'Silky-soft scarf with timeless pattern.', price: 34.99, category: 'Apparel', rating: 4.5, stock: 12, color: '#2A9D8F' },
      { id: 'p8', name: 'Notebook Pro', description: 'Premium dotted notebook with 240 pages.', price: 9.99, category: 'Office', rating: 4.0, stock: 25, color: '#E9C46A' }
    ];

    // State
    let cart = [];
    const CART_KEY = 'spa-palette-cart-v1';
    let filters = { query: '', category: 'All', maxPrice: 100, sort: 'relevance' };

    // Elements
    const buildEl = (tag, attrs = {}, ...children) => {
      const el = document.createElement(tag);
      Object.entries(attrs).forEach(([k, v]) => {
        if (k.startsWith('on') && typeof v === 'function') el.addEventListener(k.substring(2).toLowerCase(), v);
        else if (k === 'style' && typeof v === 'object') Object.assign(el.style, v);
        else el.setAttribute(k, v);
      });
      children.forEach(child => el.appendChild(typeof child === 'string' ? document.createTextNode(child) : child));
      return el;
    };

    const productGrid = document.getElementById('productGrid');
    const searchInput = document.getElementById('search');
    const clearSearchBtn = document.getElementById('clearSearch');
    const categoryChips = document.getElementById('categoryChips');
    const maxPriceInput = document.getElementById('maxPrice');
    const priceValue = document.getElementById('priceValue');
    const sortSelect = document.getElementById('sort');
    const cartToggle = document.getElementById('cartToggle');
    const modal = document.getElementById('modal');
    const modalCloseBtn = modal.querySelector('.modal-close');
    const modalImage = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const modalRating = document.getElementById('modalRating');
    const modalPrice = document.getElementById('modalPrice');
    const modalStock = document.getElementById('modalStock');
    const modalAdd = document.getElementById('modalAdd');
    const checkoutModal = document.getElementById('checkoutModal');
    const checkoutCloseBtn = checkoutModal.querySelector('.modal-close');
    const checkoutForm = document.getElementById('checkoutForm');
    const cartCloseBtnSelector = '.cart-header button';
    const subtotalEl = document.getElementById('subtotal');
    const itemCountEl = document.getElementById('itemCount');
    const checkoutBtnPlaceholder = document.getElementById('checkout'); // may not exist yet

    let cartPanel; // will be created if missing

    // Initialize
    function init() {
      loadCart();
      renderCategoryChips();
      renderCatalog();
      ensureCartPanel();
      updateCartBadge();
      renderCartItems();
      bindEvents();
    }

    // Load cart from localStorage
    function loadCart() {
      try {
        const raw = localStorage.getItem(CART_KEY);
        if (raw) cart = JSON.parse(raw);
      } catch {
        cart = [];
      }
    }

    function saveCart() {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartBadge();
    }

    // Helpers
    function updateCartBadge() {
      const totalQty = cart.reduce((sum, it) => sum + it.qty, 0);
      cartToggle.textContent = `Cart (${totalQty})`;
      // enable/disable checkout
      const btn = document.getElementById('checkout');
      if (btn) btn.disabled = cart.length === 0;
    }

    function currency(n) {
      return `$${n.toFixed(2)}`;
    }

    function getProductById(id) {
      return PRODUCTS.find(p => p.id === id);
    }

    // Ensure cart panel exists and return it
    function ensureCartPanel() {
      if (cartPanel) return cartPanel;
      let panel = document.getElementById('cart');
      if (!panel) {
        panel = document.createElement('aside');
        panel.id = 'cart';
        panel.className = 'cart';
        panel.setAttribute('aria-label', 'Shopping cart');
        panel.innerHTML = `
          <div class="cart-header">
            <strong>Cart</strong>
            <button id="cartClose" class="btn-ghost" aria-label="Close cart" style="padding:6px 8px;">Close</button>
          </div>
          <div class="cart-items" id="cartItems" role="list"></div>
          <div class="cart-summary" aria-label="Cart totals" style="padding:12px;">
            <div>Subtotal: <span id="subtotal" style="font-weight:700;">$0.00</span></div>
            <div>Items: <span id="itemCount">0</span></div>
            <button id="checkout" class="btn btn-primary" aria-label="Checkout">Checkout</button>
          </div>
        `;
        document.body.appendChild(panel);
        // Bind events
        panel.querySelector('#cartClose').addEventListener('click', toggleCart);
        panel.querySelector('#checkout').addEventListener('click', openCheckout);
      }
      cartPanel = panel;
      return panel;
    }

    function toggleCart() {
      const panel = ensureCartPanel();
      panel.classList.toggle('open');
      // focus trap-ish
      if (panel.classList.contains('open')) panel.focus();
    }

    // Render category chips
    function renderCategoryChips() {
      const categories = ['All', ...Array.from(new Set(PRODUCTS.map(p => p.category)))];
      categoryChips.innerHTML = '';
      categories.forEach(cat => {
        const chip = document.createElement('button');
        chip.className = 'chip' + (filters.category === cat ? ' chipactive' : '');
        chip.textContent = cat;
        chip.addEventListener('click', () => {
          filters.category = cat;
          document.querySelectorAll('.chip').forEach(c => c.classList.remove('chipactive'));
          chip.classList.add('chipactive');
          renderCatalog();
        });
        categoryChips.appendChild(chip);
      });
    }

    // Render catalog grid
    function renderCatalog() {
      // Apply filters
      const results = PRODUCTS.filter(p => {
        const q = filters.query.toLowerCase();
        const inQuery = !q || p.name.toLowerCase().includes(q) || p.description.toLowerCase().includes(q);
        const inCategory = filters.category === 'All' || p.category === filters.category;
        const inPrice = p.price <= filters.maxPrice;
        return inQuery && inCategory && inPrice;
      }).slice();

      // Sorting
      switch (filters.sort) {
        case 'price-asc':
          results.sort((a,b) => a.price - b.price);
          break;
        case 'price-desc':
          results.sort((a,b) => b.price - a.price);
          break;
        case 'rating-desc':
          results.sort((a,b) => b.rating - a.rating);
          break;
        default:
          // relevance: keep as is
          break;
      }

      productGrid.innerHTML = '';
      if (results.length === 0) {
        productGrid.innerHTML = `
          <div style="grid-column:1 / -1; padding:20px; text-align:center; border:1px dashed rgba(255,255,255,.25); border-radius:8px;">
            No products match your filters.
          </div>`;
        return;
      }

      results.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        card.setAttribute('data-id', p.id);

        // image/thumb
        const thumb = document.createElement('div');
        thumb.className = 'thumb';
        thumb.style.background = p.color;
        thumb.textContent = p.name.split(' ').slice(0,2).join(' ');
        // content
        const title = document.createElement('h3');
        title.textContent = p.name;
        const rating = document.createElement('div');
        rating.className = 'rating';
        rating.setAttribute('aria-label', `Rating ${p.rating} out of 5`);
        rating.textContent = '★'.repeat(Math.round(p.rating)) + '☆'.repeat(5 - Math.round(p.rating));

        const price = document.createElement('div');
        price.className = 'price';
        price.textContent = currency(p.price);

        // actions
        const actions = document.createElement('div');
        actions.className = 'card-actions';
        const viewBtn = document.createElement('button');
        viewBtn.className = 'btn';
        viewBtn.textContent = 'View';
        viewBtn.addEventListener('click', () => openProductModal(p.id));

        const addBtn = document.createElement('button');
        addBtn.className = 'btn btn-primary';
        addBtn.textContent = 'Add';
        addBtn.addEventListener('click', () => addToCart(p.id, 1));

        actions.appendChild(viewBtn);
        actions.appendChild(addBtn);

        card.appendChild(thumb);
        card.appendChild(title);
        card.appendChild(rating);
        card.appendChild(price);
        card.appendChild(actions);

        // click anywhere on card also open detail
        card.addEventListener('click', (e) => {
          if (e.target.tagName.toLowerCase() === 'button') return;
          openProductModal(p.id);
        });

        productGrid.appendChild(card);
      });
    }

    // Open product detail modal
    function openProductModal(productId) {
      const p = getProductById(productId);
      if (!p) return;
      // fill<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Palette SPA Shop</title>
  <style>
    /* Color tokens (palette-enforced) */
    :root {
      --brand-1: #264653;
      --brand-2: #2A9D8F;
      --brand-3: #E9C46A;
      --brand-4: #F4A261;
      --brand-5: #E76F51;
    }

    /* Global resets and accessibility helpers */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: #f7f7f7;
      color: #102019;
    }

    /* Layout */
    header {
      position: sticky;
      top: 0;
      z-index: 20;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 20px;
      background: var(--brand-1);
      border-bottom: 3px solid var(--brand-5);
      color: #fff;
    }
    .brand {
      display: flex; align-items: center; gap: 12px;
    }
    .logo {
      width: 34px; height: 34px; border-radius: 8px;
      background: linear-gradient(135deg, var(--brand-2), var(--brand-3));
      display: inline-block;
    }
    .brand-name {
      font-weight: 800;
      color: #fff;
      font-size: 1.05rem;
      letter-spacing: .5px;
    }

    .header-actions { display: flex; gap: 8px; align-items: center; }

    /* Buttons */
    .btn {
      border: 1px solid var(--brand-5);
      background: var(--brand-2);
      color: #06231a;
      padding: 10px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }
    .btn:hover { filter: brightness(0.98); }
    .btn-primary {
      background: var(--brand-5);
      color: #fff;
      border: none;
    }
    .btn-ghost {
      background: transparent;
      color: var(--brand-3);
      border: 1px solid rgba(0,0,0,.15);
    }

    /* Layout grid: filters + catalog */
    .container {
      display: grid;
      grid-template-columns: 290px 1fr;
      gap: 16px;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Filters panel */
    .filters {
      background: #1f5b4a;
      border: 1px solid var(--brand-5);
      border-radius: 12px;
      padding: 14px;
      color: #e8f4f0;
    }
    .filters h2 {
      margin: 4px 0 12px;
      font-size: 1rem;
      color: var(--brand-3);
    }
    .search-row {
      display: flex; gap: 8px; align-items: center;
      margin-bottom: 12px;
    }
    .search-row input[type="search"] {
      flex: 1;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,.2);
      outline: none;
    }
    select, input[type="range"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,.2);
      background: #fff;
      color: #264653;
    }
    .chips {
      display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px;
    }
    .chip {
      padding: 6px 10px; border-radius: 999px;
      background: rgba(255,255,255,.15);
      border: 1px solid rgba(255,255,255,.3);
      color: #fff; cursor: pointer; font-size: .9rem;
    }
    .chipactive { background: var(--brand-3); color: #2b2b2b; }

    .range-row {
      display: grid; gap: 6px;
    }
    .range-row label { font-size: .9rem; color: #fff; }
    .range-row .value { font-weight: 700; text-align: right; color: #fff; }

    /* Catalog grid */
    .catalog {
      min-height: 60vh;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
      gap: 12px;
    }
    .card {
      background: #fff;
      border: 1px solid #e5e5e5;
      border-radius: 12px;
      padding: 12px;
      color: #063b2f;
      display: flex; flex-direction: column; height: 100%;
      box-shadow: 0 1px 3px rgba(0,0,0,.05);
    }
    .thumb {
      height: 120px;
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      color: #062e24;
      font-weight: bold;
      font-size: 0.9rem;
      margin-bottom: 8px;
      text-shadow: 0 1px 0 rgba(255,255,255,.6);
    }
    .card h3 { margin: 6px 0; font-size: 1rem; color: #063b2f; }
    .card .rating { font-size: .9rem; color: #ffd166; }
    .card .price { margin-top: 6px; font-weight: 800; color: #063b2f; }
    .card-actions { margin-top: auto; display: flex; gap: 6px; }

    /* Product detail modal */
    .modal {
      position: fixed; inset: 0;
      background: rgba(0,0,0,.6);
      display: none; align-items: center; justify-content: center;
      padding: 20px;
      z-index: 50;
    }
    .modal.open { display: flex; }
    .modal-content {
      width: min(720px, 96%); background: #fff; color: #1b2b28;
      border-radius: 12px; padding: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 14px;
      border: 2px solid var(--brand-5);
    }
    .modal-image {
      height: 260px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem; font-weight: 700; color: #0b2a1a;
    }
    .modal-close { align-self: start; justify-self: end; background: transparent; border: none; font-size: 1.4rem; cursor: pointer; color: #333; }
    .modal-info h3 { margin: 0 0 6px; color: #033b27; }
    .modal-info .desc { color: #2b3b2a; margin-bottom: 6px; }
    .modal-info .stock { font-size: .9rem; color: #1a6a2e; }
    .modal-info .price { font-size: 1.2rem; font-weight: 800; color: #0e4a1f; }

    /* Cart panel (drawer) */
    .cart {
      position: fixed; right: 0; top: 0; height: 100%;
      width: 340px; max-width: 90vw;
      background: #2A9D8F; color: #032b1f;
      border-left: 3px solid var(--brand-5);
      transform: translateX(100%);
      transition: transform .28s ease;
      z-index: 40;
      display: flex; flex-direction: column;
    }
    .cart.open { transform: translateX(0); }
    .cart-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 14px; border-bottom: 1px solid rgba(0,0,0,.2);
    }
    .cart-items { padding: 10px; overflow: auto; flex: 1; display: grid; gap: 8px; }
    .cart-item { display: grid; grid-template-columns: 48px 1fr auto; gap: 8px; align-items: center; background: rgba(255,255,255,.25); border-radius: 8px; padding: 6px; }
    .cart-item .thumb { width: 48px; height: 48px; border-radius: 6px; display: inline-flex; align-items: center; justify-content: center; font-size: 0.8rem; color: #062b1a; }
    .cart-item .title { font-size: .92rem; font-weight: 700; }
    .cart-item .qty { display: inline-flex; align-items: center; gap: 6px; }
    .cart-item button { padding: 4px 8px; font-size: .8rem; }

    .cart-summary { padding: 12px; border-top: 1px solid rgba(0,0,0,.2); display: grid; gap: 8px; }

    /* Checkout modal (simple) */
    .checkout-modal {
      padding: 8px;
      font-family: inherit;
    }

    /* Responsive tweaks */
    @media (max-width: 980px) {
      .container { grid-template-columns: 1fr; padding: 12px; }
      .modal-content { grid-template-columns: 1fr; }
    }

    /* Accessibility helpers */
    .sr-only { position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden; }
  </style>
</head>
<body>

  <header>
    <div class="brand" aria-label="Brand">
      <span class="logo" aria-hidden="true"></span>
      <div class="brand-name" aria-label="Brand name">
        Nova<span style="color:white;">Cart</span>
      </div>
    </div>
    <div class="header-actions">
      <button id="cartToggle" class="btn" aria-label="Open shopping cart">Cart (0)</button>
    </div>
  </header>

  <main class="container" role="main" aria-label="Product catalog and filters">
    <!-- Filters Panel -->
    <section class="filters" aria-label="Product filters">
      <h2>Filters</h2>
      <div class="search-row">
        <input id="search" type="search" placeholder="Search products…" aria-label="Search products" />
        <button id="clearSearch" class="btn-ghost" aria-label="Clear search" title="Clear search" style="padding:8px 10px;">Clear</button>
      </div>

      <div class="chips" id="categoryChips" aria-label="Categories"></div>

      <div class="range-row" aria-label="Price filter">
        <label for="maxPrice">Max price</label>
        <input id="maxPrice" type="range" min="5" max="100" step="1" value="100" aria-valuemin="5" aria-valuemax="100" aria-valuenow="100" />
        <div class="value" id="priceValue" style="text-align:right; font-weight:700;">$100</div>
      </div>

      <div style="margin-top: 10px;">
        <label for="sort" style="font-size:.9rem; display:block; margin-bottom:4px;">Sort by</label>
        <select id="sort" aria-label="Sort products">
          <option value="relevance">Relevance</option>
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="rating-desc">Rating</option>
        </select>
      </div>
    </section>

    <!-- Catalog Grid -->
    <section class="catalog" aria-label="Product catalog">
      <div id="productGrid" class="grid"></div>
    </section>
  </main>

  <!-- Product Detail Modal -->
  <div id="modal" class="modal" role="dialog" aria-label="Product details" aria-modal="true" tabindex="-1">
    <div class="modal-content">
      <button class="modal-close" aria-label="Close product details">✕</button>
      <div class="modal-image" id="modalImage" style="background:#ddd; color:#333; min-height:180px; border-radius:8px; display:flex; align-items:center; justify-content:center;">
        <!-- dynamic placeholder -->
      </div>
      <div class="modal-info" style="display:flex; flex