<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>School Management Dashboard — Design Specification (Single-File SPA)</title>
  <style>
    :root{
      --bg: #0f1220;
      --card: #171a2b;
      --muted: #97a0b8;
      --brand: #4b7bec;
      --brand-2: #22c55e;
      --card-border: #2b3153;
      --text: #e9eaf7;
      --warning: #f59e0b;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; background: linear-gradient(135deg, #0b0f1e 0%, #141a2a 100%); color: var(--text); }
    .container { display: grid; grid-template-columns: 320px 1fr; gap: 20px; padding: 20px; max-width: 1200px; margin: auto; }
    header { grid-column: 1 / -1; display:flex; align-items: center; justify-content: space-between; padding: 14px 20px; border-radius: 12px; background: linear-gradient(135deg, rgba(75,123,236,0.25), rgba(34,197,94,0.25)); border:1px solid rgba(255,255,255,.08); }
    header h1 { font-size: 1.1rem; margin:0; }
    .role-switch { display:flex; gap:8px; flex-wrap: wrap; }
    .role-switch button { padding: 8px 12px; border-radius: 999px; border:1px solid rgba(255,255,255,.25); background: rgba(255,255,255,.08); color:#fff; cursor:pointer; font-weight:600; }
    .role-switch button.active { background: var(--brand); border-color: #fff; }
    aside { background: #111322; border:1px solid var(--card-border); border-radius: 12px; padding: 14px; height: calc(100vh - 120px); overflow:auto; position: sticky; top: 12px; align-self: start; }
    aside h2 { font-size: 0.9rem; color: #cbd5e1; margin: 6px 0 14px; text-transform: uppercase; letter-spacing: .12em; }
    aside .section { margin-bottom: 14px; padding-bottom: 12px; border-bottom: 1px dashed #2a2f57; }
    aside .section:last-child { border-bottom: none; padding-bottom: 0; }
    main { min-height: calc(100vh - 60px); }
    .panel { background: rgba(15, 18, 38, 0.9); border:1px solid var(--card-border); border-radius: 12px; padding: 16px; margin-bottom: 16px; }
    h2 { font-size: 1.05rem; margin: 0 0 8px; }
    .sub { color: var(--muted); font-size: .92rem; margin-bottom: 6px; }
    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
    @media (max-width:  980px) { .container { grid-template-columns: 1fr; padding: 12px; } aside { order: 2; height: auto; position: relative; top: auto; } .grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width:  640px) { .grid { grid-template-columns: 1fr; } }
    .card { background: linear-gradient(180deg, rgba(7,9,23,.9), rgba(7,9,23,.7)); border:1px solid var(--card-border); border-radius: 12px; padding: 14px; display:flex; flex-direction:column; min-height: 110px; }
    .card .title { font-size: .92rem; color:#cbd5e1; margin-bottom: 6px; }
    .card .value { font-size: 1.6rem; font-weight: 700; color:#fff; }
    .delta { font-size:.8rem; color: var(--muted); }
    .section-title { display:flex; align-items: center; justify-content: space-between; gap: 8px; margin-bottom: 8px; }
    .copy-area { display:flex; gap:8px; align-items:center; }
    button.btn { background: var(--brand); color:white; padding: 8px 12px; border:none; border-radius:6px; cursor: pointer; font-weight:600; }
    button.btn.secondary { background: #2b2f57; }
    pre { background: #0b0f1a; padding: 12px; border-radius: 8px; overflow:auto; border:1px solid #1e2540; max-height: 260px; }
    code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas; color: #e2e8f0; }
    svg { width: 100%; height: auto; overflow: visible; }
    .er-row { display:flex; flex-direction: row; align-items: center; justify-content: space-between; }
    .er-entity { fill: #1e2c5a; stroke: #4a6bd6; stroke-width: 2; rx: 12; ry: 12; }
    .er-attr { fill: #2b2f57; stroke: #4a6bd6; stroke-width: 1; }
    .legend { display:flex; gap:10px; align-items:center; font-size: .85rem; color: #cbd5e1; }
    .legend span { display:inline-flex; align-items:center; gap:6px; }
    .rect { rx: 10; ry: 10; }

  </style>
</head>
<body>
  <div class="container">
    <!-- Header with role switcher -->
    <header>
      <div>
        <strong>School Management Dashboard — Design Spec (Single-File)</strong>
        <div class="sub" id="visionLine" style="font-size:.9rem; color:#cbd5e1;">Multi-campus, role-based, data-driven dashboards for admins, principals, teachers, counselors, and finance staff.</div>
      </div>
      <div class="role-switch" aria-label="Switch role">
        <button data-role="Admin" class="active" title="Admin">Admin</button>
        <button data-role="Principal">Principal</button>
        <button data-role="Teacher">Teacher</button>
        <button data-role="Counselor">Counselor</button>
        <button data-role="Finance">Finance</button>
      </div>
    </header>

    <!-- Left column: Summary & inputs (static for this spec) -->
    <aside aria-label="Overview & inputs">
      <div class="section">
        <h2>Overview</h2>
        <p class="sub" style="margin-top:6px;">
          Objective: A comprehensive, scalable dashboard design for a School Management Application consolidating student info, academics, attendance, finance, communications, staff, and operations.
        </p>
        <p class="sub">Scope: Admins, Principals, Teachers, Counselors, Finance. Global data governance, RBAC/ABAC, and localization supported.</p>
      </div>

      <div class="section">
        <h2>Inputs & Assumptions</h2>
        <ul style="margin:0 0 0 18px; padding:0;">
          <li> RBAC/ABAC model with per-campus scoping</li>
          <li> Near-real-time data sync or batched ETL with latency tolerances</li>
          <li> Data sources: SIS, LMS, Finance/ERP, HRIS, attendance devices</li>
          <li> Localization: EN/ES; WCAG 2.1 AA</li>
        </ul>
      </div>

      <div class="section">
        <h2>Export</h2>
        <div class="copy-area">
          <button class="btn" id="btnCopyJson" title="Copy full spec as JSON">Copy Spec JSON</button>
          <button class="btn secondary" id="btnPreview" title="Open a preview modal (inline)">Preview Role View</button>
        </div>
        <p class="sub" style="margin-top:6px;">This single file includes an exportable JSON spec generator for downstream design/engineering use.</p>
      </div>
    </aside>

    <!-- Right: Content panels -->
    <main id="mainContent" aria-label="Specification content">
      <!-- Vision & Strategy -->
      <section class="panel" id="vision" aria-labelledby="visionTitle">
        <div class="section-title">
          <h2 id="visionTitle" style="margin:0;">Vision & Target Outcomes</h2>
        </div>
        <p class="sub" style="margin-top:6px;">
          Build role-based dashboards that provide actionable insights, data governance, secure access, and extensible UI to support school-wide decision making.
        </p>
        <ul>
          <li>Admins: governance, enrollment, multi-campus analytics, reporting.</li>
          <li>Principals: school-level insights, scheduling, performance dashboards.</li>
          <li>Teachers: classroom analytics, attendance, and grading visibility.</li>
          <li>Counselors: welfare metrics, at-risk indicators, referrals.</li>
          <li>Finance: tuition tracking, revenue forecasting, outstanding balances.</li>
        </ul>
      </section>

      <!-- Data Model -->
      <section class="panel" id="data-model" aria-labelledby="dataModelTitle">
        <div class="section-title">
          <h2 id="dataModelTitle" style="margin:0;">Data Model — Entities & Relationships</h2>
        </div>
        <p class="sub" style="margin-top:0;">
          Core entities and relationships to support all KPI domains and role-based views.
        </p>
        <!-- ERD (inline SVG) -->
        <div class="er" aria-label="Entity-Relationship Diagram" style="margin-top:8px;">
          <svg viewBox="0 0 900 380" role="img" aria-label="ER Diagram">
            <!-- Campus -->
            <rect x="40" y="40" width="210" height="90" rx="12" class="er-entity"></rect>
            <text x="145" y="92" text-anchor="middle" fill="#fff" font-family="Arial" font-size="14">Campus</text>

            <!-- Student -->
            <rect x="320" y="40" width="210" height="90" rx="12" class="er-entity"></rect>
            <text x="430" y="92" text-anchor="middle" fill="#fff" font-family="Arial" font-size="14">Student</text>

            <!-- Class -->
            <rect x="590" y="40" width="210" height="90" rx="12" class="er-entity"></rect>
            <text x="700" y="92" text-anchor="middle" fill="#fff" font-family="Arial" font-size="14">Class</text>

            <!-- Attendance -->
            <rect x="40" y="180" width="210" height="90" rx="12" class="er-entity"></rect>
            <text x="145" y="232" text-anchor="middle" fill="#fff" font-family="Arial" font-size="14">Attendance</text>

            <!-- Fee -->
            <rect x="320" y="180" width="210" height="90" rx="12" class="er-entity"></rect>
            <text x="430" y="232" text-anchor="middle" fill="#fff" font-family="Arial" font-size="14">Fee</text>

            <!-- Subject -->
            <rect x="590" y="180" width="210" height="90" rx="12" class="er-entity"></rect>
            <text x="700" y="232" text-anchor="middle" fill="#fff" font-family="Arial" font-size="14">Subject</text>

            <!-- Relationships -->
            <line x1="250" y1="85" x2="320" y2="85" stroke="#7f8cde" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="530" y1="85" x2="590" y2="85" stroke="#7f8cde" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="250" y1="225" x2="320" y2="225" stroke="#7f8cde" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="530" y1="225" x2="590" y2="225" stroke="#7f8cde" stroke-width="2" marker-end="url(#arrow)"/>

            <!-- Definitions -->
            <defs>
              <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
                <path d="M0,0 L0,6 L9,3 z" fill="#7f8cde" />
              </marker>
            </defs>
          </svg>
        </div>

        <div class="legend" style="margin-top:8px;">
          <span><span style="width:14px;height:14px;display:inline-block;background:#1e2c5a;border-radius:3px;"></span> Entities</span>
          <span><span style="width:14px;height:14px;display:inline-block;background:#7f8cde;border-radius:3px;"></span> Relationships</span>
        </div>

        <details style="margin-top:8px;">
          <summary style="cursor:pointer; color:#cbd5e1;">Field-level Definitions (sample)</summary>
          <pre><code>{
  "Student": {
    "id": "string",
    "firstName": "string",
    "lastName": "string",
    "campusId": "string",
    "classId": "string",
    "enrollmentStatus": "string",
    "dob": "date"
  },
  "Class": {
    "id": "string",
    "name": "string",
    "subjectId": "string",
    "teacherId": "string",
    "schedule": "string"
  },
  "Attendance": {
    "id": "string",
    "studentId": "string",
    "classId": "string",
    "date": "date",
    "status": "string"
  },
  "Fee": {
    "id": "string",
    "studentId": "string",
    "amount": "number",
    "dueDate": "date",
    "paidDate": "date",
    "status": "string"
  }
}</code></pre>
        </details>
      </section>

      <!-- Data Sources & ETL -->
      <section class="panel" id="data-sources" aria-labelledby="dataSourcesTitle">
        <div class="section-title">
          <h2 id="dataSourcesTitle" style="margin:0;">Data Sources & Integration</h2>
        </div>
        <p class="sub" style="margin-top:6px;">
          Data sources, schema outlines, and refresh cadence. Includes ETL/ELT or API data hooks with lineage.
        </p>

        <div class="grid" aria-label="Data sources grid" style="margin-top:6px;">
          <div class="card">
            <div class="title">SIS (Student Information)</div>
            <div class="value" style="font-size:1.1rem;">Student, Enrollment, Class associations</div>
            <div class="delta" style="margin-top:6px;">Refresh: near-real-time</div>
          </div>
          <div class="card">
            <div class="title">LMS (Learning)</div>
            <div class="value" style="font-size:1.1rem;">Grades, Assessments, Course materials</div>
            <div class="delta" style="margin-top:6px;">Refresh: 5–15 min</div>
          </div>
          <div class="card">
            <div class="title">Finance/ERP</div>
            <div class="value" style="font-size:1.1rem;">Fees, Payments, Revenue</div>
            <div class="delta" style="margin-top:6px;">Refresh: hourly</div>
          </div>
        </div>

        <details style="margin-top:8px;">
          <summary>API Contracts (sample)</summary>
          <pre><code>{
  "endpoints": [
    {
      "path": "/api/students",
      "method": "GET",
      "response": [
        { "id": "S001", "firstName": "Alex", "lastName": "Kim", "campusId": "C1", "classId": "CL101", "gpa": 3.8, "attendanceRate": 0.95 }
      ]
    },
    {
      "path": "/api/attendance",
      "method": "GET",
      "response": [
        { "studentId": "S001", "classId": "CL101", "date": "2025-08-25", "status": "Present" }
      ]
    },
    {
      "path": "/api/fees",
      "method": "GET",
      "response": [
        { "studentId": "S001", "amount": 1200, "dueDate": "2025-09-01", "paid