<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PulseCart - Single Page E-commerce</title>
  <style>
    :root{
      --c-yellow: #FFBE0B;
      --c-orange: #FB5607;
      --c-pink: #FF006E;
      --c-purple: #8338EC;
      --c-blue: #3A86FF;
      --bg: #f6f7fb;
      --card: #ffffff;
      --text: #1f2a37;
      --muted: #5b6770;
      --shadow: 0 6px 18px rgba(0,0,0,.08);
      --radius: 14px;
    }

    html, body {
      height: 100%;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Helvetica Neue", sans-serif;
      color: var(--text);
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Layout helpers */
    .container { width: min(1100px, 92%); margin: 0 auto; }
    .row { display: flex; gap: 12px; align-items: center; }

    /* Header */
    .site-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: #fff;
      border-bottom: 1px solid #eee;
      padding: 14px 0;
      box-shadow: 0 2px 6px rgba(0,0,0,.04);
    }
    .brand {
      display: flex; align-items: center; gap: 8px;
      font-weight: 800; letter-spacing: .2px;
    }
    .brand .logo {
      width: 28px; height: 28px; border-radius: 6px;
      background: linear-gradient(135deg, var(--c-yellow), var(--c-orange));
      display: inline-block;
    }
    .brand-name { font-size: 1.1rem; color: #333; }

    .header-inner { display:flex; align-items:center; justify-content: space-between; gap: 12px; padding: 6px 0; }

    #search {
      width: 100%; max-width: 520px;
      padding: 10px 12px; border-radius: 999px; border:1px solid #ddd;
      outline: none;
      background: #fff;
    }

    .btn {
      display:inline-flex; align-items:center; justify-content:center;
      padding: 10px 14px; border-radius: 999px; border: none; cursor: pointer;
      font-weight: 700;
      transition: transform .1s ease;
    }
    .btn[aria-label]:focus, .btn:focus { outline: 2px solid var(--c-blue); outline-offset: 2px; }
    .btn:active { transform: translateY(1px); }

    .btn-secondary {
      background: #f1f5f9; color: #0f172a;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--c-yellow), var(--c-orange));
      color: #1a1a1a;
    }
    .btn-outline {
      background: #fff; border:1px solid #ddd;
    }
    .cart-count {
      display:inline-block; min-width: 18px; height: 18px; padding: 0 6px;
      background: var(--c-blue); color: #fff; border-radius: 999px; font-size: 12px;
      line-height: 18px; margin-left: 6px;
    }

    /* Catalog grid */
    main.catalog { padding: 20px 0 60px; }
    .catalog-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
      gap: 16px;
    }

    .card {
      background: var(--card);
      border-radius: 12px;
      box-shadow: var(--shadow);
      overflow: hidden;
      display: flex; flex-direction: column;
      transition: transform .15s ease;
      min-height: 100%;
    }
    .card:hover { transform: translateY(-2px); }
    .card-img { height: 150px; width: 100%; object-fit: cover; background: #eaeef6; display:block; }
    .card-body { padding: 12px; display:flex; flex-direction:column; gap: 8px; }
    .card-title { margin:0; font-size: 1rem; line-height: 1.25; }
    .card-desc { color: var(--muted); font-size: .92rem; min-height: 38px; }
    .price { font-weight: 800; font-size: 1.05rem; }
    .stock { font-size: .78rem; padding: 2px 6px; border-radius: 999px; display:inline-block; }
    .stock.in { background: #eaffea; color: #1e7a1e; border: 1px solid #b6e6b0; }
    .stock.out { background: #fee2e2; color: #a81e1e; border: 1px solid #f5c2c2; }

    .card-actions { display:flex; gap:8px; align-items:center; justify-content: space-between; }

    /* Detail modal */
    .modal {
      position: fixed; inset: 0; display: none; align-items: center; justify-content: center;
      background: rgba(0,0,0,.4); z-index: 60;
    }
    .modal[aria-hidden="false"] { display: flex; }
    .modal-card {
      width: min(720px, 92%);
      background: #fff; border-radius: 12px; overflow:hidden;
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
    }
    .modal-header { display:flex; justify-content: space-between; align-items:center; padding:12px 16px; border-bottom:1px solid #eee; }
    .modal-body { padding: 12px 16px 16px; display:flex; gap: 14px; }
    .modal-img { width: 280px; height: 210px; object-fit: cover; border-radius: 8px; }
    .modal-content { flex: 1; display:flex; flex-direction:column; gap:8px; }
    .modal-close { background: transparent; border: none; font-size: 1.4rem; line-height: 1; cursor: pointer; }

    /* Cart Drawer */
    .overlay {
      display: none;
      position: fixed; top: 0; left: 0; right:0; bottom:0;
      background: rgba(0,0,0,.45); z-index: 55;
    }
    .cart-drawer {
      position: fixed; top: 0; right: 0; height: 100%; width: 420px;
      background: #fff; box-shadow: -12px 0 28px rgba(0,0,0,.15);
      transform: translateX(100%); transition: transform .25s ease;
      z-index: 60; display:flex; flex-direction:column;
    }
    .cart-drawer.open { transform: translateX(0); }
    .cart-header { padding: 14px 16px; border-bottom: 1px solid #eee; display:flex; justify-content: space-between; align-items: center; }
    .cart-list { padding: 8px 12px; overflow:auto; flex: 1; display:flex; flex-direction:column; gap: 10px; }
    .cart-item { display:flex; gap: 8px; align-items:center; padding:6px; border-radius:8px; border:1px solid #eee; }
    .cart-thumb { width: 46px; height: 46px; border-radius: 6px; object-fit: cover; background:#f0f4ff; }
    .cart-item-details { flex:1; display:flex; flex-direction:column; gap:6px; }
    .cart-item-name { font-size: .92rem; margin:0; white-space:nowrap; overflow:hidden; text-overflow: ellipsis; }
    .cart-item-price { font-weight: 700; font-size: .9rem; }
    .qty-controls { display:flex; align-items:center; gap:6px; }
    .qty-btn { width:26px; height:26px; border-radius:6px; border:1px solid #ddd; background:#fff; cursor:pointer; }
    .remove-btn { background: #fff; border:1px solid #e5e7eb; color: #374151; padding:6px 8px; border-radius:6px; cursor:pointer; }

    .cart-footer { padding: 12px 14px; border-top: 1px solid #eee; display:flex; flex-direction:column; gap:8px; }
    .totals { display:flex; justify-content: space-between; font-weight: 700; }
    .checkout { padding: 12px 0 4px; display:flex; flex-direction:column; gap:8px; }
    .checkout[hidden] { display:none; }
    #checkoutForm label { display:flex; flex-direction:column; gap:6px; font-size: .92rem; }
    #checkoutForm input, #checkoutForm textarea {
      padding:8px; border-radius:6px; border:1px solid #ddd; width: 100%;
    }
    #checkoutMessage { min-height: 22px; color: #166534; font-weight: 600; }

    /* Helpers */
    .sr-only { position: absolute; width: 1px; height: 1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }

    /* Responsive tweaks */
    @media (max-width: 900px){
      .header-inner { flex-wrap: wrap; gap: 8px; }
      #search { order: 3; width: 100%; max-width: none; }
      .cart-drawer { width: 100%; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header" aria-label="Site header">
    <div class="container header-inner">
      <div class="row brand" aria-label="Brand">
        <span class="logo" aria-hidden="true"></span>
        <span class="brand-name">PulseCart</span>
      </div>

      <input id="search" type="search" placeholder="Search products..." aria-label="Search products" />

      <button id="openCart" class="btn btn-primary" aria-label="Open shopping cart">
        Cart
        <span class="cart-count" id="cartCount" aria-live="polite">0</span>
      </button>
    </div>
  </header>

  <!-- Main app -->
  <main class="container catalog" aria-label="Product catalog">
    <section id="productGrid" class="catalog-grid" aria-label="Product grid">
      <!-- Cards injected by JS -->
    </section>
  </main>

  <!-- Detail Modal -->
  <section id="detailModal" class="modal" aria-hidden="true" role="dialog" aria-label="Product details">
    <div class="modal-card" role="document">
      <div class="modal-header">
        <strong id="detailTitle">Product</strong>
        <button class="modal-close" id="detailClose" aria-label="Close details">Ã—</button>
      </div>
      <div class="modal-body" id="detailBody">
        <!-- dynamic content -->
      </div>
    </div>
  </section>

  <!-- Cart overlay & drawer -->
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <aside id="cartDrawer" class="cart-drawer" aria-label="Shopping cart" role="complementary" aria-hidden="true" hidden>
    <div class="cart-header">
      <strong>Your Cart</strong>
      <button id="closeCart" class="btn" aria-label="Close cart">Close</button>
    </div>
    <div class="cart-list" id="cartList" aria-label="Cart items">
      <!-- cart items injected here -->
    </div>
    <div class="cart-footer">
      <div class="totals" aria-live="polite">
        <span>Subtotal</span>
        <span id="cartSubtotal" class="amount">$0.00</span>
      </div>
      <button id="checkoutBtn" class="btn btn-primary" disabled>Checkout</button>

      <div class="checkout" id="checkoutPanel" hidden aria-label="Checkout form">
        <form id="checkoutForm" autocomplete="on" novalidate>
          <label>Name
            <input type="text" id="checkoutName" required placeholder="Full name" />
          </label>
          <label>Email
            <input type="email" id="checkoutEmail" required placeholder="you@example.com" />
          </label>
          <label>Address
            <textarea id="checkoutAddress" required placeholder="Shipping address"></textarea>
          </label>
          <button type="submit" class="btn btn-success" aria-label="Place order">Place Order</button>
        </form>
        <div id="checkoutMessage" class="checkout-message" aria-live="polite"></div>
      </div>
    </div>
  </aside>

  <script>
    // Palette-driven, self-contained SPA (no external dependencies)
    // 1) Product dataset (mock)
    const products = [
      { id: 1, name: "Aurora Wireless Headphones", price: 129.99, category: "Electronics",
        description: "Immersive sound with active noise cancellation and 30h battery life.", stock: 12, rating: 4.5 },
      { id: 2, name: "Nebula Smartwatch", price: 199.99, category: "Electronics",
        description: "Track health and notifications with a sleek, water-resistant design.", stock: 8, rating: 4.2 },
      { id: 3, name: "Luma Desk Lamp", price: 39.99, category: "Home",
        description: "Energy-saving LED lamp with adjustable color temperature.", stock: 20, rating: 4.3 },
      { id: 4, name: "Pulse Fitness Band", price: 59.99, category: "Accessories",
        description: "Lightweight fitness tracker with 7-day battery life.", stock: 0, rating: 4.1 },
      { id: 5, name: "Nimbus Bluetooth Speaker", price: 89.99, category: "Electronics",
        description: "Portable speaker with deep bass and 12h playtime.", stock: 15, rating: 4.6 },
      { id: 6, name: "Aero Phone Stand", price: 14.99, category: "Accessories",
        description: "Stable, foldable phone stand for desks and nightstands.", stock: 40, rating: 4.0 },
      { id: 7, name: "Quasar Mechanical Keyboard", price: 69.99, category: "Computers",
        description: "Rgb backlit keyboard with tactile switches and hot-swap support.", stock: 5, rating: 4.4 },
      { id: 8, name: "Zen Air Purifier", price: 149.99, category: "Home",
        description: "Cleans air with quiet operation and compact footprint.", stock: 6, rating: 4.5 },
      { id: 9, name: "Vibe Wireless Mouse", price: 24.99, category: "Computers",
        description: "Ergonomic mouse with adjustable DPI and long battery life.", stock: 25, rating: 4.2 },
      { id: 10, name: "Pixel Action Camera", price: 179.99, category: "Electronics",
        description: "4K action camera with image stabilization and wide-angle lens.", stock: 7, rating: 4.3 },
      { id: 11, name: "Aurora Sunglasses", price: 32.99, category: "Lifestyle",
        description: "UV400 polarized lenses with a lightweight frame.", stock: 18, rating: 4.1 },
      { id: 12, name: "Comet USB-C Hub", price: 24.99, category: "Accessories",
        description: "6-in-1 hub with HDMI, USB-C power delivery and data transfers.", stock: 30, rating: 4.4 }
    ];

    // helpers
    const colors = ['#FFBE0B','#FB5607','#FF006E','#8338EC','#3A86FF'];
    function initialsFrom(name){
      return name.split(' ').slice(0,2).map(w => w[0]).join('').toUpperCase();
    }
    function makeImageDataURL(name, colorIndex){
      const initials = initialsFrom(name);
      const c1 = colors[colorIndex % colors.length];
      const c2 = colors[(colorIndex+2) % colors.length];
      const svg = `
        <svg xmlns="http://www.w3.org/2000/svg" width="600" height="400">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop stop-color="${c1}" offset="0"/>
              <stop stop-color="${c2}" offset="1"/>
            </linearGradient>
          </defs>
          <rect width="100%" height="100%" fill="url(#g)"/>
          <text x="50%" y="52%" text-anchor="middle" font-family="Arial, sans-serif" font-size="64" fill="#ffffff" opacity="0.95">${initials}</text>
        </svg>`;
      return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
    }

    // build images for products
    products.forEach((p, idx) => {
      p.image = makeImageDataURL(p.name, idx);
    });

    // DOM references
    const productGrid = document.getElementById('productGrid');
    const detailModal = document.getElementById('detailModal');
    const detailBody = document.getElementById('detailBody');
    const detailTitle = document.getElementById('detailTitle');
    const detailClose = document.getElementById('detailClose');
    const openCartBtn = document.getElementById('openCart');
    const cartDrawer = document.getElementById('cartDrawer');
    const overlay = document.getElementById('overlay');
    const cartList = document.getElementById('cartList');
    const cartSubtotal = document.getElementById('cartSubtotal');
    const cartCount = document.getElementById('cartCount');
    const closeCartBtn = document.getElementById('closeCart');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const checkoutPanel = document.getElementById('checkoutPanel');
    const checkoutForm = document.getElementById('checkoutForm');
    const checkoutName = document.getElementById('checkoutName');
    const checkoutEmail = document.getElementById('checkoutEmail');
    const checkoutAddress = document.getElementById('checkoutAddress');
    const checkoutMessage = document.getElementById('checkoutMessage');
    const searchInput = document.getElementById('search');

    // cart state (persisted)
    const CART_KEY = 'ecommerce_cart_spa_v1';
    let cart = [];

    function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); renderCartCount(); }

    function loadCart(){
      try {
        const raw = localStorage.getItem(CART_KEY);
        if (raw) cart = JSON.parse(raw);
      } catch(e){
        cart = [];
      }
      renderCartCount();
    }

    function getProductById(id){
      return products.find(p => p.id === id);
    }

    function renderCatalog(){
      // filter by search
      const query = (searchInput.value || '').toLowerCase().trim();
      const frag = document.createDocumentFragment();
      productGrid.innerHTML = '';
      const filtered = products.filter(p => {
        if (!query) return true;
        return p.name.toLowerCase().includes(query) || p.category.toLowerCase().includes(query) || p.description.toLowerCase().includes(query);
      });
      filtered.forEach((p) => {
        const card = document.createElement('article');
        card.className = 'card product-card';
        card.dataset.id = p.id;
        const stockClass = p.stock > 0 ? 'in' : 'out';
        card.innerHTML = `
          <img class="card-img" src="${p.image}" alt="${p.name}" />
          <div class="card-body">
            <h3 class="card-title">${p.name}</h3>
            <p class="card-desc">${p.description}</p>
            <div class="row" style="justify-content: space-between;">
              <span class="price">${formatCurrency(p.price)}</span>
              <span class="stock ${stockClass}">${p.stock>0?'In stock':'Out of stock'}</span>
            </div>
            <div class="card-actions">
              <button class="btn btn-outline add-to-cart" data-id="${p.id}" ${p.stock<=0?'disabled':''} aria-label="Add ${p.name} to cart">Add to cart</button>
              <button class="btn btn-outline details" data-id="${p.id}" aria-label="View details for ${p.name}">Details</button>
            </div>
          </div>
        `;
        frag.appendChild(card);
      });
      productGrid.appendChild(frag);
    }

    function formatCurrency(n){
      return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(n);
    }

    // Detail modal
    function openDetail(product){
      detailTitle.textContent = product.name;
      detailBody.innerHTML = `
        <img class="modal-img" src="${product.image}" alt="${product.name}">
        <div class="modal-content">
          <p style="margin:0 0 6px 0; color:#555;">${product.category} â€¢ ${product.stock>0?'In stock':'Out of stock'}</p>
          <p style="margin:0; font-size:1rem; line-height:1.4;">${product.description}</p>
          <p style="margin:6px 0 0 0; font-weight:700; font-size:1.05rem;">${formatCurrency(product.price)}</p>
          <button class="btn btn-primary" id="modalAddToCart" aria-label="Add to cart from detail">Add to cart</button>
        </div>
      `;
      detailModal.setAttribute('aria-hidden', 'false');
      detailModal.style.display = 'flex';
      // focus trap
      setTimeout(() => document.getElementById('modalAddToCart')?.focus(), 0);
    }

    function closeDetail(){
      detailModal.setAttribute('aria-hidden', 'true');
      detailModal.style.display = 'none';
    }

    detailClose.addEventListener('click', closeDetail);
    detailModal.addEventListener('click', (e) => {
      if (e.target === detailModal) closeDetail();
    });

    // Cart drawer handlers
    function openCart(){
      cartDrawer.hidden = false;
      cartDrawer.classList.add('open');
      overlay.style.display = 'block';
      overlay.setAttribute('aria-hidden', 'false');
      cartDrawer.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      renderCart();
    }
    function closeCart(){
      cartDrawer.classList.remove('open');
      cartDrawer.hidden = true;
      overlay.style.display = 'none';
      overlay.setAttribute('aria-hidden', 'true');
      cartDrawer.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
      // hide checkout panel when closing
      checkoutPanel.hidden = true;
    }
    overlay.addEventListener('click', closeCart);
    closeCartBtn.addEventListener('click', closeCart);
    openCartBtn.addEventListener('click', openCart);
    // keyboard escape to close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !detailModal.hasAttribute('aria-hidden')) {
        // close modal
        closeDetail();
      }
      if (e.key === 'Escape' && cartDrawer.classList.contains('open')) {
        closeCart();
      }
    });

    // Cart operations
    function addToCart(productId){
      const existing = cart.find(i => i.id === productId);
      if (existing) existing.qty += 1;
      else cart.push({ id: productId, qty: 1 });
      saveCart();
      renderCartCount();
      // optional: open cart after add
    }

    function updateQty(productId, delta){
      const item = cart.find(i => i.id === productId);
      if (!item) return;
      item.qty += delta;
      if (item.qty <= 0) cart = cart.filter(i => i.id !== productId);
      saveCart();
      renderCartCount();
      renderCart();
    }

    function removeFromCart(productId){
      cart = cart.filter(i => i.id !== productId);
      saveCart();
      renderCartCount();
      renderCart();
    }

    function clearCart(){
      cart = [];
      saveCart();
      renderCart();
    }

    function renderCartCount(){
      const totalQty = cart.reduce((sum, it) => sum + it.qty, 0);
      cartCount.textContent = totalQty;
      checkoutBtn.disabled = totalQty === 0;
    }

    function renderCart(){
      cartList.innerHTML = '';
      if (cart.length === 0){
        const empty = document.createElement('div');
        empty.className = 'empty';
        empty.style.color = '#555';
        empty.style.padding = '16px';
        empty.textContent = 'Your cart is empty. Add some products to get started!';
        cartList.appendChild(empty);
        cartSubtotal.textContent = '$0.00';
        return;
      }
      let subtotal = 0;
      cart.forEach(item => {
        const prod = getProductById(item.id);
        const lineTotal = prod.price * item.qty;
        subtotal += lineTotal;

        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
          <img class="cart-thumb" src="${prod.image}" alt="${prod.name}">
          <div class="cart-item-details" style="min-width:0;">
            <span class="cart-item-name" title="${prod.name}">${prod.name}</span>
            <span class="cart-item-price">${formatCurrency(prod.price)} Ã— ${item.qty} = ${formatCurrency(lineTotal)}</span>
            <div class="qty-controls" aria-label="Quantity controls for ${prod.name}">
              <button class="qty-btn" data-id="${prod.id}" data-action="dec" aria-label="Decrease quantity">-</button>
              <span style="min-width:28px; text-align:center; display:inline-block;">${item.qty}</span>
              <button class="qty-btn" data-id="${prod.id}" data-action="inc" aria-label="Increase quantity">+</button>
              <button class="remove-btn" data-id="${prod.id}" aria-label="Remove item">Remove</button>
            </div>
          </div>
        `;
        cartList.appendChild(row);
      });
      cartSubtotal.textContent = formatCurrency(subtotal);
    }

    // Cart item interactions
    cartList.addEventListener('click', (e) => {
      const btn = e.target.closest('.qty-btn');
      const rem = e.target.closest('.remove-btn');
      if (btn){
        const pid = Number(btn.dataset.id);
        const action = btn.dataset.action;
        if (action === 'inc') updateQty(pid, 1);
        if (action === 'dec') updateQty(pid, -1);
      } else if (rem){
        const pid = Number(rem.dataset.id);
        removeFromCart(pid);
      }
    });

    checkoutBtn.addEventListener('click', () => {
      checkoutPanel.hidden = false;
      // focus on first input
      setTimeout(() => checkoutName.focus(), 0);
    });

    // Checkout form
    checkoutForm.addEventListener('submit', (e) => {
      e.preventDefault();
      // basic validation
      const name = checkoutName.value.trim();
      const email = checkoutEmail.value.trim();
      const address = checkoutAddress.value.trim();
      if (!name || !email.includes('@') || !address){
        checkoutMessage.textContent = 'Please fill in valid name, email, and address.';
        checkoutMessage.style.color = '#b91c1c';
        return;
      }
      // simulate success
      checkoutMessage.textContent = 'Order placed! A confirmation has been sent to ' + email;
      checkoutMessage.style.color = '#166534';
      // reset cart after a short delay
      setTimeout(() => {
        clearCart();
        // reset checkout
        checkoutPanel.hidden = true;
        checkoutName.value = '';
        checkoutEmail.value = '';
        checkoutAddress.value = '';
        checkoutMessage.textContent = '';
        closeCart();
        alert('Thank you! This is a demo checkout.');
      }, 900);
    });

    // Global handlers for product grid: add to cart & view details
    productGrid.addEventListener('click', (e) => {
      const card = e.target.closest('.product-card');
      if (!card) return;
      const id = Number(card.dataset.id);
      const p = getProductById(id);
      if (e.target.closest('.add-to-cart')){
        if (p.stock > 0){
          addToCart(p.id);
        }
      } else if (e.target.closest('.details')){
        openDetail(p);
      }
    });

    // Detail modal within grid: also handle modal Add to cart
    detailModal.addEventListener('click', (ev) => {
      if (ev.target.id === 'modalAddToCart'){
        const pid = detailTitle.textContent ? products.find(p=>p.name===detailTitle.textContent).id : null;
        if (pid != null){
          addToCart(pid);
        } else {
          // fallback: try to parse hidden dataset
        }
      }
    });

    // Search filtering
    searchInput.addEventListener('input', () => {
      renderCatalog();
    });

    // Initial render
    function init(){
      loadCart();
      renderCatalog();
      renderCartCount();
      // hide modal by default
      detailModal.style.display = 'none';
      detailModal.setAttribute('aria-hidden', 'true');
      // ensure cart is closed
      cartDrawer.hidden = true;
      overlay.style.display = 'none';
      // ensure checkout panel is hidden
      checkoutPanel.hidden = true;
      // hook up keyboard for modal close
      detailClose.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') closeDetail();
      });
    }

    // Run
    init();
  </script>
</body>
</html>