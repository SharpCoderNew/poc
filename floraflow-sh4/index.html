<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FloraFlow Shop</title>
  <style>
    :root{
      --bg: #0b0a15;
      --surface: #141020;
      --surface-2: #1b1630;
      --text: #e8e0f6;
      --muted: #b39bd6;
      --accent-start: #a78bfa;
      --accent-end: #4c1d95;
      --ring: 0 0 0 3px rgba(167,139,250,.35);
      --card-radius: 14px;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --green: #34d399;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color:var(--text);
      background: radial-gradient( circle at 20% -10%, rgba(167,139,250,.15), transparent 40%), 
                  radial-gradient( circle at 90% 0%, rgba(76,29,149,.15), transparent 40%), 
                  linear-gradient(#0b0a15,#0b0a15);
    }
    header{position:sticky; top:0; z-index:50; background: rgba(13,10,22,.9); border-bottom:1px solid rgba(255,255,255,.05);}
    .topbar{display:flex; align-items:center; justify-content:space-between; padding:12px 20px; gap:12px; max-width:1200px; margin:0 auto;}
    .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:var(--text);}
    .brand-logo{width:34px; height:34px; border-radius:9px; background: linear-gradient(135deg, var(--accent-start), var(--accent-end)); display:inline-flex; align-items:center; justify-content:center; font-size:20px;}
    nav a{color:#e9e0f1; text-decoration:none; margin:0 8px; padding:6px 8px; border-radius:6px}
    nav a:hover, nav a:focus{ background: rgba(167,139,250,.15); outline:none; }
    .lang-select{ background: rgba(255,255,255,.08); color:var(--text); border:1px solid rgba(255,255,255,.15); border-radius:6px; padding:6px 10px; }
    .cta{ padding:10px 14px; border-radius:8px; border:none; font-weight:600; cursor:pointer;
      background: linear-gradient(135deg, var(--accent-start), var(--accent-end)); color:white;
      box-shadow: 0 6px 14px rgba(76,29,149,.5);
    }
    .cta:focus{ outline: none; box-shadow: var(--ring); }
    main{max-width:1200px; margin:0 auto; padding:20px}
    .hero{ display:grid; grid-template-columns:1.05fr .95fr; gap:20px; align-items:center; padding:28px; border-radius:20px; margin:12px 0 22px; background: linear-gradient(135deg, rgba(167,139,250,.25), rgba(76,29,149,.25)); border:1px solid rgba(167,139,250,.4);}
    .hero h1{ font-family: "Georgia", serif; font-size: clamp(28px, 5vw, 48px); margin:0 0 8px; line-height:1.04; }
    .hero p{ font-size: 1.05rem; color:#e9dfff; margin:0; }
    .hero-visual{ display:flex; align-items:center; justify-content:center; height:100%; min-height:180px; border-radius:14px; background: linear-gradient(135deg, rgba(167,139,250,.25), rgba(76,29,149,.25)); border:1px solid rgba(167,139,250,.4); position:relative; overflow:hidden;}
    .emoji-guard{ font-size:72px; filter: drop-shadow(0 6px 14px rgba(0,0,0,.4)); }
    .image-swap{ position:absolute; inset:0; object-fit:cover; width:100%; height:100%; opacity:0; transition:opacity .5s ease; }
    .grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap:14px; }
    .section{ margin:22px 0; }

    .section-header{ display:flex; align-items:baseline; justify-content:space-between; gap:12px; margin:4px 0 12px; }
    .section-header h2{ margin:0; font-family: "Georgia", serif; font-size:1.4rem; }

    .filters{ display:flex; flex-wrap:wrap; gap:10px; padding:10px; border-radius:12px; background: rgba(20,18,32,.6); border:1px solid rgba(167,139,250,.4); }

    .filter-group{ display:flex; flex-direction:column; gap:6px; min-width:180px; }
    .filter-group label{ font-size:.85rem; color:#d9d2e5; }

    select, input[type="number"]{ width:100%; padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,.25); background: rgba(255,255,255,.04); color:var(--text); }
    button.small{ padding:8px 12px; border-radius:8px; border:1px solid rgba(255,255,255,.25); background: rgba(0,0,0,.15); color: #fff; cursor:pointer; }

    .card{ background: rgba(9,8,20,.7); border:1px solid rgba(167,139,250,.4); border-radius: var(--card-radius); overflow:hidden; display:flex; flex-direction:column; min-height:280px; box-shadow: var(--shadow); }
    .card-media{ position:relative; height:160px; background:#111; display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .image-area{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; position:relative; }
    .emoji{ font-size:54px; transition: opacity .4s ease; }
    .flower-image{ width:100%; height:100%; object-fit:cover; display:none; }
    .card-body{ padding:12px; display:flex; flex-direction:column; gap:6px; flex:1 1 auto; }
    .name{ font-size:1rem; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .tag{ font-size:.88rem; color:#d8c9e8; }
    .price{ font-weight:700; margin-top:4px; display:flex; align-items:baseline; gap:8px; }
    .original{ text-decoration: line-through; color:#b5a6c1; font-size:.88rem; }
    .rating{ display:flex; align-items:center; gap:6px; font-size:.85rem; color:#f9f3ff; }
    .card-actions{ margin-top:auto; padding:10px; display:flex; justify-content:space-between; align-items:center; border-top:1px solid rgba(255,255,255,.06); background: rgba(0,0,0,.08); }
    .badge{ padding:4px 8px; border-radius:999px; background: rgba(255,255,255,.08); font-size:.75rem; }

    /* Cart Drawer */
    .cart-drawer{ position:fixed; top:0; right:0; height:100%; width:320px; max-width:90vw; background:#11131e; border-left:1px solid rgba(255,255,255,.15); transform: translateX(100%); transition: transform .3s ease; display:flex; flex-direction:column; z-index:60; }
    .cart-drawer.open{ transform: translateX(0); }
    .cart-header{ padding:14px; display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid rgba(255,255,255,.15); }
    .cart-list{ padding:8px; overflow:auto; flex:1; display:flex; flex-direction:column; gap:8px; }
    .cart-item{ display:flex; gap:8px; align-items:center; border:1px solid rgba(255,255,255,.15); padding:8px; border-radius:8px; background: rgba(0,0,0,.15); }
    .cart-thumb{ width:40px; height:40px; border-radius:6px; display:flex; align-items:center; justify-content:center; background:#222; font-size:22px; }
    .cart-name{ flex:1; font-size:.92rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .qty{ display:flex; align-items:center; gap:6px; }
    .cart-footer{ padding:12px; border-top:1px solid rgba(255,255,255,.15); }
    .cart-total{ display:flex; justify-content:space-between; align-items:center; font-weight:700; margin:6px 0 2px; }
    .checkout{ width:100%; padding:12px; border-radius:8px; border:none; cursor:pointer;
      background: linear-gradient(135deg, var(--accent-start), var(--accent-end)); color:white; font-weight:700;
    }

    /* Floating Chat Widget */
    .chat-fab{ position:fixed; right:20px; bottom:20px; z-index:55; }
    .chat-bubble{ width:56px; height:56px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #fff, #ffd1f2 40%, #f0a6ff 70%); display:flex; align-items:center; justify-content:center; cursor:pointer; border:1px solid rgba(255,255,255,.4); color:#4c1d95; font-size:26px; box-shadow:0 6px 16px rgba(0,0,0,.3); }
    .chat-panel{ position: fixed; right: 20px; bottom: 90px; width: 320px; max-width: 90vw; height: 420px; background:#11131e; border:1px solid rgba(255,255,255,.2); border-radius:12px; display:flex; flex-direction:column; overflow:hidden; z-index:60; box-shadow:0 20px 40px rgba(0,0,0,.4);}
    .chat-header{ padding:10px; border-bottom:1px solid rgba(255,255,255,.15); display:flex; justify-content:space-between; align-items:center; }
    .chat-body{ padding:10px; overflow:auto; flex:1; display:flex; flex-direction:column; gap:8px; }
    .msg{ max-width: 80%; padding:8px 10px; border-radius:12px; background: #1b1740; color:#fff; }
    .bot{ align-self: flex-start; background: #2b1b45; }
    .user{ align-self: flex-end; background: #4a2a72; }
    .chat-input{ display:flex; padding:8px; gap:8px; border-top:1px solid rgba(255,255,255,.15); }
    .chat-input input{ flex:1; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,.25); background:#0a0a1a; color:white; }
    .toast{ position: fixed; left: 50%; transform: translateX(-50%); bottom: 18px; background: rgba(0,0,0,.75); color:white; padding:10px 14px; border-radius:8px; z-index:70; }

    /* About/Contact and Footer */
    .about{ padding:14px; border-radius:12px; background: rgba(20,18,32,.6); border:1px solid rgba(167,139,250,.4); margin-top:8px; }
    form input, form textarea{ width:100%; padding:10px; border-radius:6px; border:1px solid rgba(255,255,255,.3); background: rgba(255,255,255,.04); color:var(--text); }
    form textarea{ min-height:110px; resize:vertical; }
    .grid-col{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    @media (max-width: 900px){
      .hero{ grid-template-columns:1fr; text-align:left; }
      .grid{ grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
      .grid-col{ grid-template-columns:1fr; }
    }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }
  </style>
</head>
<body>
  <!-- Data: products and translations embedded below -->
  <header aria-label="Site header">
    <div class="topbar">
      <a href="#" class="brand" aria-label="FloraFlow Home">
        <span class="brand-logo" aria-hidden="true">FF</span>
        <span style="font-family:Georgia, serif; font-size:1.1rem;">FloraFlow</span>
      </a>
      <nav aria-label="Main navigation">
        <a href="#shop" data-i18n="nav.shop" aria-label="Shop link">Shop</a>
        <a href="#occasions" data-i18n="nav.occasions" aria-label="Occasions link">Occasions</a>
        <a href="#bestsellers" data-i18n="nav.bestsellers" aria-label="Bestsellers link">Bestsellers</a>
        <a href="#about" data-i18n="nav.about" aria-label="About link">About</a>
        <a href="#contact" data-i18n="nav.contact" aria-label="Contact link">Contact</a>
      </nav>
      <div style="display:flex; gap:10px; align-items:center;">
        <select id="lang" class="lang-select" aria-label="Language switcher">
          <option value="en">EN</option>
          <option value="es">ES</option>
          <option value="fr">FR</option>
          <option value="de">DE</option>
        </select>
        <button id="openCart" class="cta" aria-label="Open cart">Cart</button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero" aria-label="Hero">
      <div>
        <h1 data-i18n="header.title" style="margin-bottom:8px;">FloraFlow Premium Florals</h1>
        <p data-i18n="header.tagline" style="max-width:520px;">
          Create moments with lavender to violet blooms‚Äîdelivered with care.
        </p>
      </div>
      <div class="hero-visual" aria-label="Hero image placeholder">
        <span class="emoji-guard" aria-hidden="true">üå∏</span>
        <img class="image-swap" alt="" aria-hidden="true" />
      </div>
    </section>

    <section class="section" aria-labelledby="filters-title" id="filters-area">
      <div class="section-header">
        <h2 id="filters-title" data-i18n="section.filters" style="margin:0;">Filters</h2>
      </div>
      <div class="filters" role="group" aria-label="Product filters">
        <div class="filter-group">
          <label for="cat" data-i18n="filters.label.category">Category</label>
          <select id="cat" aria-label="Category filter">
            <option value="All" data-i18n="filters.all">All</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="occ" data-i18n="filters.label.occasion">Occasion</label>
          <select id="occ" aria-label="Occasion filter">
            <option value="All" data-i18n="filters.all">All</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="col" data-i18n="filters.label.color">Color</label>
          <select id="col" aria-label="Color filter">
            <option value="All" data-i18n="filters.all">All</option>
          </select>
        </div>
        <div class="filter-group">
          <label data-i18n="filters.label.price" for="minmax">Price</label>
          <div style="display:flex; gap:6px;">
            <input type="number" id="minPrice" placeholder="Min" min="0" step="1" aria-label="Min price">
            <input type="number" id="maxPrice" placeholder="Max" min="0" step="1" aria-label="Max price">
          </div>
        </div>
        <div class="filter-group">
          <label for="sort" data-i18n="filters.label.sort">Sort</label>
          <select id="sort" aria-label="Sort order">
            <option value="popularity" data-i18n="filters.sort.popularity">Popularity</option>
            <option value="priceAsc" data-i18n="filters.sort.priceAsc">Price: Low to High</option>
            <option value="priceDesc" data-i18n="filters.sort.priceDesc">Price: High to Low</option>
          </select>
        </div>
        <div class="filter-group" style="align-self:flex-end;">
          <button id="clearFilters" class="small" data-i18n="buttons.clearFilters" aria-label="Clear filters">Clear Filters</button>
        </div>
      </div>
    </section>

    <section class="section" id="shop" aria-labelledby="shop-title">
      <div class="section-header">
        <h2 id="shop-title" data-i18n="section.shop">Shop</h2>
        <span class="badge" aria-label="Shown item count" id="shop-count"></span>
      </div>
      <div class="grid" id="shop-grid" role="region" aria-label="Shop items grid"></div>
    </section>

    <section class="section" id="occasions" aria-labelledby="occasions-title">
      <div class="section-header">
        <h2 id="occasions-title" data-i18n="section.occasions">Occasions</h2>
        <span class="badge" id="occ-count" aria-label="Occasions count"></span>
      </div>
      <div class="grid" id="occasions-grid" role="region" aria-label="Occasions grid"></div>
    </section>

    <section class="section" id="bestsellers" aria-labelledby="bestsellers-title">
      <div class="section-header">
        <h2 id="bestsellers-title" data-i18n="section.bestsellers">Bestsellers</h2>
        <span class="badge" id="best-count" aria-label="Bestsellers count"></span>
      </div>
      <div class="grid" id="bestsellers-grid" role="region" aria-label="Bestsellers grid"></div>
    </section>

    <section class="section" id="about" aria-labelledby="about-title">
      <h2 id="about-title" data-i18n="section.about">About FloraFlow</h2>
      <div class="about" data-i18n="about.text" id="about-text" style="white-space:pre-wrap;">
        FloraFlow creates premium floral experiences with a lavender to violet gradient aesthetic. Our flowers are sourced for quality and delivered with care.
      </div>
    </section>

    <section class="section" id="contact" aria-labelledby="contact-title">
      <h2 id="contact-title" data-i18n="section.contact">Contact</h2>
      <div class="grid grid-col" style="gap:14px;">
        <div class="about" aria-label="Contact form">
          <form id="contactForm" novalidate>
            <div style="display:flex; gap:12px;">
              <div style="flex:1;">
                <label for="name" data-i18n="contact.name"></label>
                <input id="name" name="name" type="text" placeholder="" aria-required="true" required />
              </div>
              <div style="flex:1;">
                <label for="email" data-i18n="contact.email"></label>
                <input id="email" name="email" type="email" placeholder="" aria-required="true" required />
              </div>
            </div>
            <div style="margin-top:8px;">
              <label for="message" data-i18n="contact.message"></label>
              <textarea id="message" name="message" aria-required="true" required></textarea>
            </div>
            <div style="margin-top:8px;">
              <button type="submit" class="cta" aria-label="Send message" data-i18n="contact.submit">Send</button>
            </div>
          </form>
        </div>
        <div class="about" aria-label="Contact info">
          <strong data-i18n="footer.brand">FloraFlow</strong><br/>
          Email: hello@flora.flow<br/>
          Phone: +1 555 0123<br/>
          Address: 123 Violet Ave, Bloom City
        </div>
      </div>
    </section>

  </main>

  <footer aria-label="Site footer" style="padding:20px 12px; text-align:center;">
    <div data-i18n="footer.brand" style="font-weight:700; letter-spacing:.5px; font-family: Georgia, serif;">FloraFlow</div>
    <div style="font-size:.92rem; color:var(--muted); margin-top:6px;">
      <span data-i18n="footer.newsletter">Subscribe to our newsletter</span> ‚Ä¢ 
      <span data-i18n="footer.privacy">Privacy</span> ‚Ä¢ 
      <span data-i18n="footer.terms">Terms</span>
    </div>
  </footer>

  <!-- Cart Drawer -->
  <aside class="cart-drawer" id="cart" aria-label="Shopping cart" role="complementary" aria-hidden="true">
    <div class="cart-header">
      <strong data-i18n="cart.title">Cart</strong>
      <button id="closeCart" class="small" aria-label="Close cart">Close</button>
    </div>
    <div class="cart-list" id="cart-list" aria-live="polite"></div>
    <div class="cart-footer" aria-label="Cart summary">
      <div class="cart-total">
        <span data-i18n="cart.subtotal">Subtotal</span>
        <span id="cart-subtotal">$0</span>
      </div>
      <button class="checkout" id="checkout" aria-label="Checkout button" data-i18n="buttons.checkout">Checkout</button>
    </div>
  </aside>

  <!-- Floating Chat Widget -->
  <div class="chat-fab" aria-label="Chat with FloraFlow">
    <div class="chat-bubble" id="chatBubble" title="Chat with FloraFlow" role="button" tabindex="0">üí¨</div>
  </div>

  <div class="chat-panel" id="chatPanel" hidden aria-label="Chat panel" role="region">
    <div class="chat-header">
      <strong>FloraFlow Support</strong>
      <button id="closeChat" class="small" aria-label="Close chat">‚úñ</button>
    </div>
    <div class="chat-body" id="chatBody">
      <div class="msg bot" aria-label="Bot message">Hi there! I can help you pick the perfect bloom. Ask me anything.</div>
    </div>
    <div class="chat-input">
      <input id="chatInput" type="text" placeholder="Type your message..." aria-label="Chat input" />
      <button id="sendChat" class="cta" aria-label="Send chat">Send</button>
    </div>
  </div>

  <!-- Data: Products (20) and translations (EN default) -->
  <script id="product-data" type="application/json">
  {
    "products": [
      {"id":1,"name":"Lavender Veil","tagline":"Soft lavender bouquet","rating":4.8,"reviewCount":128,"price":64,"originalPrice":78,"emoji":"üå∑","unsplashQuery":"lavender bouquet","category":"Bouquet","occasion":"Birthday","color":"Purple","popularity":95},
      {"id":2,"name":"Midnight Orchid","tagline":"Elegant orchid arrangement","rating":4.6,"reviewCount":210,"price":72,"originalPrice":90,"emoji":"ü™∑","unsplashQuery":"orchid arrangement","category":"Arrangement","occasion":"Love","color":"Purple","popularity":90},
      {"id":3,"name":"Crimson Cascade","tagline":"Red roses that captivate","rating":4.7,"reviewCount":190,"price":58,"originalPrice":70,"emoji":"üåπ","unsplashQuery":"red roses bouquet","category":"Bouquet","occasion":"Anniversary","color":"Red","popularity":88},
      {"id":4,"name":"Sunset Blossoms","tagline":"Sun-kissed florals","rating":4.5,"reviewCount":120,"price":54,"originalPrice":65,"emoji":"üåª","unsplashQuery":"sunflower bouquet","category":"Bouquet","occasion":"Birthday","color":"Yellow","popularity":82},
      {"id":5,"name":"Pink Mirage","tagline":"Pink hues, gentle joy","rating":4.4,"reviewCount":143,"price":48,"originalPrice":60,"emoji":"üíê","unsplashQuery":"pink roses","category":"Bouquet","occasion":"Love","color":"Pink","popularity":80},
      {"id":6,"name":"White Whisper","tagline":"Purity in petals","rating":4.3,"reviewCount":98,"price":42,"originalPrice":52,"emoji":"üåº","unsplashQuery":"white lilies bouquet","category":"Bouquet","occasion":"Get Well","color":"White","popularity":75},
      {"id":7,"name":"Aurora Garden","tagline":"Lavender to violet dream","rating":4.7,"reviewCount":180,"price":68,"originalPrice":85,"emoji":"üíú","unsplashQuery":"purple flowers bouquet","category":"Gift Box","occasion":"Love","color":"Purple","popularity":93},
      {"id":8,"name":"Forest Twilight","tagline":"Evening hues that enchant","rating":4.5,"reviewCount":114,"price":60,"originalPrice":78,"emoji":"üå∫","unsplashQuery":"purple flowers bouquet","category":"Arrangement","occasion":"Anniversary","color":"Purple","popularity":86},
      {"id":9,"name":"Bubblegum Bouquet","tagline":"Playful pinks","rating":4.2,"reviewCount":88,"price":44,"originalPrice":58,"emoji":"üíó","unsplashQuery":"pink bouquet","category":"Bouquet","occasion":"Birthday","color":"Pink","popularity":70},
      {"id":10,"name":"Golden Hour","tagline":"Radiant yellows","rating":4.4,"reviewCount":110,"price":50,"originalPrice":62,"emoji":"üåº","unsplashQuery":"yellow roses bouquet","category":"Bouquet","occasion":"Get Well","color":"Yellow","popularity":77},
      {"id":11,"name":"Rose Medley","tagline":"A chorus of roses","rating":4.6,"reviewCount":160,"price":59,"originalPrice":75,"emoji":"üåπ","unsplashQuery":"roses bouquet","category":"Bouquet","occasion":"Love","color":"Red","popularity":86},
      {"id":12,"name":"Petal Promise","tagline":"Delicate garden charm","rating":4.5,"reviewCount":130,"price":46,"originalPrice":58,"emoji":"üå∏","unsplashQuery":"petal bouquet","category":"Gift Box","occasion":"Birthday","color":"Pink","popularity":78},
      {"id":13,"name":"Birthday Glow","tagline":"Cheerful bloom set","rating":4.3,"reviewCount":81,"price":40,"unsplashQuery":"birthday flowers","category":"Gift Box","occasion":"Birthday","color":"Yellow","colorHint":"Yellow","popularity":70},
      {"id":14,"name":"Love Letters","tagline":"Romantic rose combo","rating":4.6,"reviewCount":102,"price":68,"originalPrice":85,"emoji":"üåπ","unsplashQuery":"roses gift box","category":"Gift Box","occasion":"Love","color":"Pink","popularity":85},
      {"id":15,"name":"Get Well Wishes","tagline":"Cheerful bouquet","rating":4.2,"reviewCount":60,"price":42,"unsplashQuery":"get well bouquet","category":"Bouquet","occasion":"Get Well","color":"White","popularity":60},
      {"id":16,"name":"Forever Yours","tagline":"Classic red roses","rating":4.9,"reviewCount":210,"price":75,"originalPrice":95,"emoji":"üåπ","unsplashQuery":"red roses","category":"Bouquet","occasion":"Anniversary","color":"Red","popularity":92},
      {"id":17,"name":"Lavender Night","tagline":"Premium lavender mix","rating":4.8,"reviewCount":230,"price":69,"originalPrice":89,"emoji":"üíú","unsplashQuery":"lavender bouquet","category":"Bouquet","occasion":"Love","color":"Purple","popularity":98},
      {"id":18,"name":"Sunset Safari","tagline":"Bright sunflower array","rating":4.5,"reviewCount":140,"price":60,"originalPrice":72,"emoji":"üåª","unsplashQuery":"sunflower arrangement","category":"Arrangement","occasion":"Birthday","color":"Yellow","popularity":90},
      {"id":19,"name":"Petal Parade","tagline":"Mixed petals medley","rating":4.3,"reviewCount":95,"price":58,"unsplashQuery":"mixed flowers bouquet","category":"Bouquet","occasion":"Love","color":"Mixed","popularity":85},
      {"id":20,"name":"Winter Whisper","tagline":"Quiet, white wonder","rating":4.4,"reviewCount":110,"price":72,"unsplashQuery":"winter bouquet","category":"Arrangement","occasion":"Get Well","color":"White","popularity":82}
    ]
  }
  </script>

  <script id="translations" type="application/json">
  {
    "en": {
      "nav": { "shop": "Shop","occasions": "Occasions","bestsellers": "Bestsellers","about": "About","contact": "Contact" },
      "header": { "title": "FloraFlow Premium Florals","tagline": "Lavender to violet delivery, with care" },
      "section": { "shop": "Shop","occasions": "Occasions","bestsellers": "Bestsellers","about": "About FloraFlow" },
      "filters": { "label": { "category": "Category","occasion": "Occasion","color": "Color","price": "Price","sort": "Sort" }, "all": "All","sort": { "popularity": "Popularity","priceAsc": "Price: Low to High","priceDesc": "Price: High to Low" } },
      "buttons": { "clearFilters": "Clear Filters","checkout": "Checkout","addToCart": "Add to Cart" },
      "empty": { "shop": "No items match your filters.","cart": "Your cart is empty." },
      "sectionText": { "about": "About FloraFlow","bestsellers": "Bestsellers" },
      "about": { "title": "About FloraFlow","text": "FloraFlow is a premium flower brand delivering boutique bouquets and elegant arrangements with a lavender to violet gradient aesthetic. Our flowers are chosen for quality and passion." },
      "contact": { "title": "Contact Us","name": "Name","email": "Email","message": "Message","submit": "Send Message" },
      "footer": { "brand": "FloraFlow","newsletter": "Subscribe to our newsletter","privacy": "Privacy","terms": "Terms" },
      "cart": { "title": "Cart","subtotal": "Subtotal" }
    },
    "es": {
      "nav": { "shop": "Tienda","occasions": "Ocasiones","bestsellers": "M√°s vendidos","about": "Acerca de","contact": "Contacto" },
      "header": { "title": "FloraFlow Florister√≠a Premium","tagline": "Entrega de lavanda a violeta, con cuidado" },
      "section": { "shop": "Tienda","occasions": "Ocasiones","bestsellers": "M√°s vendidos","about": "Acerca de FloraFlow" },
      "filters": { "label": { "category": "Categor√≠a","occasion": "Ocasi√≥n","color": "Color","price": "Precio","sort": "Ordenar" }, "all": "Todos","sort": { "popularity": "Popularidad","priceAsc": "Precio: Menor a Mayor","priceDesc": "Precio: Mayor a Menor" } },
      "buttons": { "clearFilters": "Borrar Filtros","checkout": "Pagar","addToCart": "Agregar al Carrito" },
      "empty": { "shop": "Sin resultados con estos filtros.","cart": "Tu carrito est√° vac√≠o." },
      "sectionText": { "about": "Acerca FloraFlow","bestsellers": "M√°s Vendidos" },
      "about": { "title": "Acerca FloraFlow","text": "FloraFlow es una marca premium de flores que entrega ramos y arreglos elegantes con una est√©tica degradada de lavanda a violeta. Nuestras flores se seleccionan con calidad y pasi√≥n." },
      "contact": { "title": "Cont√°ctanos","name": "Nombre","email": "Correo","message": "Mensaje","submit": "Enviar Mensaje" },
      "footer": { "brand": "FloraFlow","newsletter": "Suscr√≠bete a nuestro bolet√≠n","privacy": "Privacidad","terms": "T√©rminos" },
      "cart": { "title": "Carrito","subtotal": "Subtotal" }
    },
    "fr": {
      "nav": { "shop": "Boutique","occasions": "Occasions","bestsellers": "Meilleurs ventes","about": "√Ä propos","contact": "Contact" },
      "header": { "title": "FloraFlow Fleurs Premium","tagline": "Livraison lavande √† violet avec soin" },
      "section": { "shop": "Boutique","occasions": "Occasions","bestsellers": "Meilleures ventes","about": "√Ä propos" },
      "filters": { "label": { "category": "Cat√©gorie","occasion": "Occasion","color": "Couleur","price": "Prix","sort": "Trier" }, "all": "Tous","sort": { "popularity": "Popularit√©","priceAsc": "Prix croissant","priceDesc": "Prix d√©croissant" } },
      "buttons": { "clearFilters": "Effacer les filtres","checkout": "Commander","addToCart": "Ajouter au panier" },
      "empty": { "shop": "Aucun article ne correspond √† vos filtres.","cart": "Votre panier est vide." },
      "sectionText": { "about": "√Ä propos de FloraFlow","bestsellers": "Meilleures ventes" },
      "about": { "title": "√Ä propos FloraFlow","text": "FloraFlow est une marque de fleurs premium qui livre des bouquets et arrangements √©l√©gants avec une esth√©tique d√©grad√©e lavande √† violet." },
      "contact": { "title": "Contact","name": "Nom","email": "Email","message": "Message","submit": "Envoyer le message" },
      "footer": { "brand": "FloraFlow","newsletter": "Abonnez-vous √† notre newsletter","privacy": "Confidentialit√©","terms": "Conditions" },
      "cart": { "title": " Panier","subtotal": "Sous-total" }
    },
    "de": {
      "nav": { "shop": "Shop","occasions": "Anl√§sse","bestsellers": "Bestseller","about": "√úber uns","contact": "Kontakt" },
      "header": { "title": "FloraFlow Premiumblumen","tagline": "Lavendel bis Violett Lieferung mit Stil" },
      "section": { "shop": "Shop","occasions": "Anl√§sse","bestsellers": "Bestseller","about": "√úber FloraFlow" },
      "filters": { "label": { "category": "Kategorie","occasion": "Anlass","color": "Farbe","price": "Preis","sort": "Sortieren" }, "all": "Alle","sort": { "popularity": "Beliebtheit","priceAsc": "Preis aufsteigend","priceDesc": "Preis absteigend" } },
      "buttons": { "clearFilters": "Filter zur√ºcksetzen","checkout": "Kasse","addToCart": "In den Warenkorb" },
      "empty": { "shop": "Keine Artikel entsprechen Ihren Filtern.","cart": "Ihr Warenkorb ist leer." },
      "sectionText": { "about": "√úber FloraFlow","bestsellers": "Bestseller" },
      "about": { "title": "√úber FloraFlow","text": "FloraFlow ist eine Premium-Floristenmarke, die Ranken und Arrangements mit einer lavendel-violetten √Ñsthetik liefert." },
      "contact": { "title": "Kontakt","name": "Name","email": "E-Mail","message": "Nachricht","submit": "Nachricht senden" },
      "footer": { "brand": "FloraFlow","newsletter": "Newsletter abonnieren","privacy": "Datenschutz","terms": "Nutzungsbedingungen" },
      "cart": { "title": "Warenkorb","subtotal": "Zwischensumme" }
    }
  }
  </script>

  <script>
    // Data and i18n setup
    const productData = JSON.parse(document.getElementById('product-data').textContent).products;
    const TRANSLATIONS = JSON.parse(document.getElementById('translations').textContent);
    let currentLang = 'en';
    const langSelector = document.getElementById('lang');
    langSelector.value = currentLang;

    // Elements
    const shopGrid = document.getElementById('shop-grid');
    const occGrid = document.getElementById('occasions-grid');
    const bestGrid = document.getElementById('bestsellers-grid');
    const shopCount = document.getElementById('shop-count');
    const occCount = document.getElementById('occ-count');
    const bestCount = document.getElementById('best-count');
    const cartEl = document.getElementById('cart');
    const cartList = document.getElementById('cart-list');
    const cartSubtotal = document.getElementById('cart-subtotal');
    const closeCart = document.getElementById('closeCart');
    const openCart = document.getElementById('openCart');
    const checkoutBtn = document.getElementById('checkout');
    const chatPanel = document.getElementById('chatPanel');
    const chatBubble = document.getElementById('chatBubble');
    const closeChat = document.getElementById('closeChat');
    const chatInput = document.getElementById('chatInput');
    const sendChat = document.getElementById('sendChat');
    const cartStatus = document.createElement('div');
    cartStatus.className = 'sr-only';
    cartStatus.id = 'cart-status';
    document.body.appendChild(cartStatus);

    // Filters state
    const categories = ['Bouquet','Arrangement','Gift Box'];
    const occasions = ['Birthday','Anniversary','Get Well','Love'];
    const colors = ['Purple','Pink','Red','Yellow','White','Mixed'];
    const sortOptions = ['popularity','priceAsc','priceDesc'];
    const minPriceGlobal = Math.min(...productData.map(p => p.price));
    const maxPriceGlobal = Math.max(...productData.map(p => p.price));

    const filterState = {
      category: 'All',
      occasion: 'All',
      color: 'All',
      minPrice: minPriceGlobal,
      maxPrice: maxPriceGlobal,
      sortKey: 'popularity'
    };

    // Populate filter controls with dynamic options
    function populateFilters(){
      const catSel = document.getElementById('cat');
      categories.forEach(cat => {
        const o = document.createElement('option');
        o.value = cat;
        o.textContent = cat;
        catSel.appendChild(o);
      });

      const occSel = document.getElementById('occ');
      occasions.forEach(o => {
        const opt = document.createElement('option');
        opt.value = o;
        opt.textContent = o;
        occSel.appendChild(opt);
      });

      const colSel = document.getElementById('col');
      colors.forEach(c => {
        const o = document.createElement('option');
        o.value = c;
        o.textContent = c;
        colSel.appendChild(o);
      });

      // No need to populate sort; HTML already has options
    }

    // Translation utilities
    function getPathVal(obj, path){
      return path.split('.').reduce((acc, key) => (acc && acc[key] !== undefined) ? acc[key] : undefined, obj);
    }
    function translateElement(el, path){
      const val = getPathVal(TRANSLATIONS[currentLang] || TRANSLATIONS['en'], path);
      const replacement = (val !== undefined) ? val : getPathVal(TRANSLATIONS['en'], path) ?? '';
      if(el.tagName.toLowerCase() === 'option'){
        el.textContent = replacement;
      } else {
        el.textContent = replacement;
      }
    }
    function updateLanguage(lang){
      currentLang = lang;
      // Update all elements with data-i18n
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const path = el.getAttribute('data-i18n');
        translateElement(el, path);
      });
      // Also update placeholder texts inside inputs if any
      // No additional actions needed; text nodes updated above
      // Update options in selects (for labels inside, etc.)
    }

    // Card rendering
    function createCard(product){
      const card = document.createElement('div');
      card.className = 'card';
      card.setAttribute('data-id', product.id);

      // Media area with emoji default
      const media = document.createElement('div');
      media.className = 'card-media';
      const imageArea = document.createElement('div');
      imageArea.className = 'image-area';
      imageArea.setAttribute('aria-label', product.name);
      const emojiSpan = document.createElement('span');
      emojiSpan.className = 'emoji';
      emojiSpan.textContent = product.emoji;
      emojiSpan.setAttribute('aria-hidden','true');
      imageArea.appendChild(emojiSpan);

      const img = document.createElement('img');
      img.className = 'flower-image';
      img.alt = product.name;
      imageArea.appendChild(img);
      media.appendChild(imageArea);
      card.appendChild(media);

      // Preload image from Unsplash
      const highRes = `https://source.unsplash.com/600x400/?${encodeURIComponent(product.unsplashQuery)}`;
      const preload = new Image();
      preload.src = highRes;
      preload.onload = () => {
        img.src = highRes;
        img.style.display = 'block';
        emojiSpan.style.opacity = '0';
      };
      preload.onerror = () => {
        // keep emoji visible
      };

      // Body
      const body = document.createElement('div');
      body.className = 'card-body';
      const name = document.createElement('div');
      name.className = 'name';
      name.title = product.name;
      name.textContent = product.name;
      body.appendChild(name);

      const tagline = document.createElement('div');
      tagline.className = 'tag';
      tagline.textContent = product.tagline;
      body.appendChild(tagline);

      const rating = document.createElement('div');
      rating.className = 'rating';
      rating.innerHTML = ` ${'‚òÖ'.repeat(Math.round(product.rating))} ${product.rating.toFixed(1)} (${product.reviewCount})`;
      rating.setAttribute('aria-label', `Rating ${product.rating} based on ${product.reviewCount} reviews`);
      body.appendChild(rating);

      const priceRow = document.createElement('div');
      priceRow.className = 'price';
      const price = document.createElement('span');
      price.textContent = `$${product.price}`;
      priceRow.appendChild(price);
      if(product.originalPrice){
        const orig = document.createElement('span');
        orig.className = 'original';
        orig.textContent = `$${product.originalPrice}`;
        priceRow.appendChild(orig);
      }
      body.appendChild(priceRow);

      card.appendChild(body);

      const actions = document.createElement('div');
      actions.className = 'card-actions';
      const addBtn = document.createElement('button');
      addBtn.className = 'cta add-to-cart';
      addBtn.textContent = 'Add to Cart';
      addBtn.dataset.productId = product.id;
      actions.appendChild(addBtn);

      // Quick color indicator badge
      const badge = document.createElement('span');
      badge.className = 'badge';
      badge.textContent = product.color;
      actions.appendChild(badge);

      card.appendChild(actions);

      return card;
    }

    // Rendering sections
    function renderShop(list){
      shopGrid.innerHTML = '';
      const subset = list.slice(0,12);
      subset.forEach(p => shopGrid.appendChild(createCard(p)));
      shopCount.textContent = `${subset.length} items`;
      // Bind add-to-cart
      shopGrid.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.addEventListener('click', () => addToCart(btn.dataset.productId));
      });
      // Ensure images are preloaded for all visible cards
      // No extra action needed here; already started on createCard
    }
    function renderOccasions(list){
      occGrid.innerHTML = '';
      const subset = list.slice(0,4);
      subset.forEach(p => occGrid.appendChild(createCard(p)));
      occCount.textContent = `${subset.length} items`;
      occGrid.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.addEventListener('click', () => addToCart(btn.dataset.productId));
      });
    }
    function renderBestsellers(list){
      bestGrid.innerHTML = '';
      const subset = list.slice(0,4);
      subset.forEach(p => bestGrid.appendChild(createCard(p)));
      bestCount.textContent = `${subset.length} items`;
      bestGrid.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.addEventListener('click', () => addToCart(btn.dataset.productId));
      });
    }

    // Filtering logic
    function applyFilters(){
      let filtered = productData.filter(p => {
        const okCat = filterState.category === 'All' || p.category === filterState.category;
        const okOcc = filterState.occasion === 'All' || p.occasion === filterState.occasion;
        const okCol = filterState.color === 'All' || p.color === filterState.color;
        const okMin = p.price >= filterState.minPrice;
        const okMax = p.price <= filterState.maxPrice;
        return okCat && okOcc && okCol && okMin && okMax;
      });

      if(filterState.sortKey === 'popularity'){
        filtered = filtered.sort((a,b)=> b.popularity - a.popularity);
      } else if(filterState.sortKey === 'priceAsc'){
        filtered = filtered.sort((a,b)=> a.price - b.price);
      } else if(filterState.sortKey === 'priceDesc'){
        filtered = filtered.sort((a,b)=> b.price - a.price);
      }

      const shopItems = filtered;
      const occasionsItems = filtered.filter(p => occasions.includes(p.occasion)).slice(0,4);
      const bestItems = filtered.slice().sort((a,b)=> b.popularity - a.popularity).slice(0,4);

      renderShop(shopItems);
      renderOccasions(occasionsItems);
      renderBestsellers(bestItems);
    }

    // Add to cart logic
    const cartMap = new Map();
    function addToCart(id){
      const pid = Number(id);
      const prod = productData.find(p => p.id === pid);
      if(!prod) return;

      if(cartMap.has(pid)){
        const item = cartMap.get(pid);
        item.qty += 1;
      } else {
        cartMap.set(pid, { product: prod, qty: 1 });
      }
      renderCart();
      openCartPanel();
    }

    function renderCart(){
      cartList.innerHTML = '';
      let subtotal = 0;
      cartMap.forEach((item, id) => {
        const row = document.createElement('div');
        row.className = 'cart-item';
        const thumb = document.createElement('div');
        thumb.className = 'cart-thumb';
        thumb.textContent = item.product.emoji;
        const name = document.createElement('div');
        name.className = 'cart-name';
        name.textContent = item.product.name;
        const price = document.createElement('div');
        price.style.fontWeight = '700';
        price.style.marginLeft = '6px';
        price.textContent = `$${item.product.price * item.qty}`;

        const qtyBox = document.createElement('div');
        qtyBox.className = 'qty';
        const minus = document.createElement('button');
        minus.className = 'small';
        minus.textContent = '‚àí';
        minus.setAttribute('aria-label','Decrease quantity');
        minus.addEventListener('click', () => {
          if(item.qty > 1){
            item.qty -= 1;
          } else {
            cartMap.delete(id);
          }
          renderCart();
        });
        const q = document.createElement('span');
        q.textContent = item.qty;
        const plus = document.createElement('button');
        plus.className = 'small';
        plus.textContent = '+';
        plus.setAttribute('aria-label','Increase quantity');
        plus.addEventListener('click', () => {
          item.qty += 1;
          renderCart();
        });
        qtyBox.appendChild(minus);
        qtyBox.appendChild(q);
        qtyBox.appendChild(plus);

        const remove = document.createElement('button');
        remove.className = 'small';
        remove.textContent = 'Remove';
        remove.style.marginLeft = '6px';
        remove.addEventListener('click', () => {
          cartMap.delete(id);
          renderCart();
        });

        row.appendChild(thumb);
        row.appendChild(name);
        row.appendChild(price);
        row.appendChild(qtyBox);
        row.appendChild(remove);

        subtotal += item.product.price * item.qty;
        cartList.appendChild(row);
      });
      cartSubtotal.textContent = `$${subtotal}`;
      cartStatus.textContent = `Cart updated: ${cartMap.size} items`;
      // open/close aria
      cartEl.setAttribute('aria-hidden', cartMap.size === 0 ? 'true' : 'false');
      document.querySelectorAll('#shop-grid .card, #occasions-grid .card, #bestsellers-grid .card')
        .forEach(card => card.setAttribute('aria-disabled', cartMap.size > 0 ? 'false' : 'false'));
      if(subtotal === 0){
        // show empty state
      }
    }

    // Cart panel helpers
    function openCartPanel(){
      cartEl.classList.add('open');
      cartEl.setAttribute('aria-hidden','false');
      // add ARIA Live
      cartStatus.textContent = 'Cart updated';
    }
    function closeCartPanel(){
      cartEl.classList.remove('open');
      cartEl.setAttribute('aria-hidden','true');
    }

    // Chat
    function addChatMessage(text, from='user'){
      const div = document.createElement('div');
      div.className = 'msg ' + (from==='user' ? 'user' : 'bot');
      div.textContent = text;
      document.getElementById('chatBody').appendChild(div);
      document.getElementById('chatBody').scrollTop = document.getElementById('chatBody').scrollHeight;
    }
    function botReply(userText){
      const replies = [
        "That sounds lovely! Try a lavender focus bouquet to accent any room.",
        "We offer same-day delivery in many areas. Which color mood do you prefer?",
        "Would you like a gift box or a bouquet accessory with your order?",
        "I can help you pick a seasonal arrangement‚Äîpurple hues are in bloom now."
      ];
      const r = replies[Math.floor(Math.random()*replies.length)];
      setTimeout(()=> addChatMessage(r, 'bot'), 800);
    }

    // Contact form validation
    const contactForm = document.getElementById('contactForm');
    contactForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = document.getElementById('name');
      const email = document.getElementById('email');
      const message = document.getElementById('message');
      if(!name.value.trim() || !email.value.trim() || !message.value.trim()){
        alert('Please fill out all fields.');
        return;
      }
      // Simple fake success
      alert('Thank you! Your message has been sent.');
      contactForm.reset();
    });

    // Init
    function init(){
      populateFilters();
      // Initial language
      updateLanguage('en');
      // Fill filters with current dataset
      // Set min/max defaults
      document.getElementById('minPrice').value = filterState.minPrice;
      document.getElementById('maxPrice').value = filterState.maxPrice;

      // Bind filter changes
      document.getElementById('cat').addEventListener('change', (e)=>{
        filterState.category = e.target.value;
        applyFilters();
      });
      document.getElementById('occ').addEventListener('change', (e)=>{
        filterState.occasion = e.target.value;
        applyFilters();
      });
      document.getElementById('col').addEventListener('change', (e)=>{
        filterState.color = e.target.value;
        applyFilters();
      });
      document.getElementById('minPrice').addEventListener('input', (e)=>{
        filterState.minPrice = Number(e.target.value) || 0;
        applyFilters();
      });
      document.getElementById('maxPrice').addEventListener('input', (e)=>{
        filterState.maxPrice = Number(e.target.value) || maxPriceGlobal;
        applyFilters();
      });
      document.getElementById('sort').addEventListener('change', (e)=>{
        filterState.sortKey = e.target.value;
        applyFilters();
      });
      document.getElementById('clearFilters').addEventListener('click', ()=>{
        filterState.category = 'All';
        filterState.occasion = 'All';
        filterState.color = 'All';
        filterState.minPrice = minPriceGlobal;
        filterState.maxPrice = maxPriceGlobal;
        filterState.sortKey = 'popularity';
        document.getElementById('cat').value = 'All';
        document.getElementById('occ').value = 'All';
        document.getElementById('col').value = 'All';
        document.getElementById('minPrice').value = minPriceGlobal;
        document.getElementById('maxPrice').value = maxPriceGlobal;
        document.getElementById('sort').value = 'popularity';
        applyFilters();
      });

      // Language switch
      document.getElementById('lang').addEventListener('change', (e)=>{
        updateLanguage(e.target.value);
      });

      // Cart panel toggles
      openCart.addEventListener('click', () => openCartPanel());
      closeCart.addEventListener('click', () => closeCartPanel());

      // Chat UI
      chatBubble.addEventListener('click', () => {
        chatPanel.hidden = false;
        chatPanel.style.display = 'flex';
      });
      closeChat.addEventListener('click', ()=> {
        chatPanel.hidden = true;
      });
      chatBubble.addEventListener('keypress', (e) => {
        if(e.key === 'Enter'){ chatPanel.hidden = false; }
      });
      sendChat.addEventListener('click', () => {
        const v = chatInput.value.trim();
        if(!v) return;
        addChatMessage(v, 'user');
        chatInput.value = '';
        botReply(v);
      });
      chatInput.addEventListener('keypress', (e) => {
        if(e.key === 'Enter'){
          sendChat.click();
        }
      });

      // Initial render
      applyFilters();
    }

    // Start after DOM ready
    document.addEventListener('DOMContentLoaded', init);
  </script>

  
</body>
</html>